<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="manifest" href="/manifest.json">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Prompt Builder God-Tier</title>
    
    <!-- iOS/Mobile Web App Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom Styles -->
    <style>
        /* Dark Mode Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #111827; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }

        /* Custom Select Dropdown Arrow */
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
            background-repeat: no-repeat;
            background-position-x: 98%;
            background-position-y: 50%;
        }

        /* Hide tap highlight on mobile */
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans antialiased h-screen flex flex-col overflow-hidden">

    <!-- Header -->
    <header class="bg-gray-800 p-4 shadow-lg sticky top-0 z-20 flex-none">
        <div class="flex justify-between items-center max-w-2xl mx-auto w-full">
            <h1 class="text-xl font-extrabold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent tracking-tight">
                PROMPT BUILDER <span class="text-xs font-mono text-gray-500">v54</span>
            </h1>
            <div id="mode-indicator" class="text-xs font-mono px-2 py-1 rounded bg-gray-700 text-gray-300">SETUP</div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow overflow-y-auto p-4 relative scroll-smooth" id="main-scroll">
        
        <!-- SCREEN 1: SETUP -->
        <div id="setup-screen" class="max-w-md mx-auto space-y-8 mt-4 transition-opacity duration-300">
            
            <!-- Content Mode -->
            <div class="space-y-3">
                <p class="text-xs text-gray-400 uppercase tracking-wider font-bold ml-1">Content Safety</p>
                <div class="grid grid-cols-2 gap-3">
                    <button class="config-btn p-4 rounded-xl bg-gray-800 hover:bg-gray-700 transition border border-gray-700 flex flex-col items-center justify-center gap-2 group data-active:bg-purple-600 data-active:border-purple-500" data-type="nsfw" data-value="false">
                        <span class="text-2xl">üõ°Ô∏è</span>
                        <span class="font-bold group-hover:text-white text-gray-300">SFW</span>
                    </button>
                    <button class="config-btn p-4 rounded-xl bg-gray-800 hover:bg-gray-700 transition border border-gray-700 flex flex-col items-center justify-center gap-2 group" data-type="nsfw" data-value="true">
                        <span class="text-2xl">üîû</span>
                        <span class="font-bold group-hover:text-white text-gray-300">NSFW</span>
                    </button>
                </div>
            </div>

            <!-- Generation Mode -->
            <div class="space-y-3">
                <p class="text-xs text-gray-400 uppercase tracking-wider font-bold ml-1">Workflow</p>
                <div class="grid grid-cols-2 gap-3">
                    <button class="config-btn p-4 rounded-xl bg-gray-800 hover:bg-gray-700 transition border border-gray-700 flex flex-col items-center justify-center gap-2 group bg-purple-600 text-white border-purple-500" data-type="mode" data-value="manual">
                        <span class="text-2xl">üéõÔ∏è</span>
                        <span class="font-bold">Manual</span>
                    </button>
                    <button class="config-btn p-4 rounded-xl bg-gray-800 hover:bg-gray-700 transition border border-gray-700 flex flex-col items-center justify-center gap-2 group" data-type="mode" data-value="random">
                        <span class="text-2xl">üé≤</span>
                        <span class="font-bold group-hover:text-white text-gray-300">Random</span>
                    </button>
                </div>
            </div>

            <!-- Subject Type -->
            <div class="space-y-3">
                <p class="text-xs text-gray-400 uppercase tracking-wider font-bold ml-1">Subject Focus</p>
                <div class="grid grid-cols-3 gap-3">
                    <button class="config-btn p-4 rounded-xl bg-gray-800 hover:bg-gray-700 transition border border-gray-700 flex flex-col items-center justify-center gap-2 group bg-purple-600 text-white border-purple-500" data-type="subject" data-value="female">
                        <span class="text-2xl">üë©</span>
                        <span class="font-bold text-sm">Female</span>
                    </button>
                    <button class="config-btn p-4 rounded-xl bg-gray-800 hover:bg-gray-700 transition border border-gray-700 flex flex-col items-center justify-center gap-2 group" data-type="subject" data-value="male">
                        <span class="text-2xl">üë®</span>
                        <span class="font-bold text-sm group-hover:text-white text-gray-300">Male</span>
                    </button>
                    <button class="config-btn p-4 rounded-xl bg-gray-800 hover:bg-gray-700 transition border border-gray-700 flex flex-col items-center justify-center gap-2 group" data-type="subject" data-value="scenery">
                        <span class="text-2xl">üèîÔ∏è</span>
                        <span class="font-bold text-sm group-hover:text-white text-gray-300">Scenery</span>
                    </button>
                </div>
            </div>

            <button id="start-btn" class="w-full py-4 mt-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl font-bold text-lg shadow-lg transform transition active:scale-95 hover:shadow-purple-500/20">
                Start Building
            </button>
        </div>

        <!-- SCREEN 2: BUILDER -->
        <div id="app-screen" class="hidden max-w-2xl mx-auto pb-40 transition-opacity duration-300">
            <button id="back-btn" class="mb-6 px-4 py-2 rounded-lg bg-gray-800 text-sm text-gray-400 hover:text-white hover:bg-gray-700 flex items-center transition border border-gray-700">
                <span>‚Üê Configure Session</span>
            </button>
            
            <!-- Dynamic Form Container -->
            <div id="manual-container" class="space-y-6"></div>
            
            <!-- Random Mode Message -->
            <div id="random-message" class="hidden text-center py-20 text-gray-500">
                <div class="text-6xl mb-4">üé≤</div>
                <p class="text-xl">Random Generator Ready</p>
                <p class="text-sm mt-2">Tap the green button below to generate infinite variations.</p>
            </div>
        </div>

    </main>

    <!-- Sticky Footer Actions -->
    <footer id="action-bar" class="bg-gray-800/95 backdrop-blur border-t border-gray-700 p-4 shadow-2xl z-30 hidden">
        <div class="max-w-2xl mx-auto space-y-3">
            <button id="generate-btn" class="w-full py-3 bg-green-600 hover:bg-green-500 active:bg-green-700 rounded-xl font-bold text-white shadow-lg transition transform active:scale-98 flex justify-center items-center gap-2">
                <span>‚ú® GENERATE PROMPT</span>
            </button>
            <div class="relative group">
                <textarea id="output-text" readonly class="w-full h-24 p-4 bg-gray-900 rounded-xl border border-gray-600 text-sm focus:ring-2 ring-purple-500 outline-none resize-none font-mono leading-relaxed" placeholder="Prompt will appear here..."></textarea>
                <button id="copy-btn" class="absolute top-2 right-2 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded-lg text-xs border border-gray-500 transition shadow-sm font-medium">
                    COPY
                </button>
            </div>
        </div>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // ==========================================
        // 1. DATA REPOSITORIES (GOD-TIER LISTS v54)
        // ==========================================

        const maleSubjects = ["Space Marine", "Noir Detective", "Viking Warrior", "Steampunk Inventor", "Battle-hardened Soldier", "Street Samurai", "Ancient God", "Wandering Ronin", "Deep Sea Diver", "Cyberpunk Hacker", "Mafia Boss", "Medieval Knight", "Dwarven Blacksmith", "Wizard", "Barbarian King", "Galactic Smuggler", "Post-Apocalyptic Warlord", "Eldritch Cultist", "Tech-Priest", "Gladiator Champion"];
        const femaleSubjects = ["Elven Princess", "Gothic Vampire", "Mysterious Sorceress", "Shield Maiden", "Cyberpunk Netrunner", "Forest Spirit", "Celestial Being", "High-Tech Assassin", "Tribal Queen", "Bellydancer", "Victorian Lady", "Space Commander", "Witch", "Mermaid", "Fairy", "Valkyrie", "High Priestess", "Steampunk Aviator", "Galactic Queen", "Dungeon Explorer", "Cyberpunk Medic", "Wasteland Raider", "Druidess", "Dark Elf Assassin", "Holy Paladin", "Necromancer", "Space Pirate", "Ghost Bride", "Geisha Assassin", "Amazonian Warrior", "Femme Fatale", "Bio-Engineer", "Mech Pilot", "Cult Leader", "Woodland Nymph", "Demon Hunter", "Bioluminescent Dryad", "Cybernetic Geisha", "Celestial Archangel", "Victorian Monster Hunter", "Ethereal Moon Goddess", "Steampunk Mechanic", "High-Fantasy Paladin", "Neo-Tokyo Drifter", "Renaissance Assassin", "Cyber-Goth Hacker", "Solarpunk Engineer", "Deep-Space Explorer", "Noir Femme Fatale", "Tribal Shamaness", "Crystal Sorceress", "Battle-Scarred General"];
        const nsfwSubjects = ["High-Born Succubus Empress with translucent obsidian skin and veins pulsing with liquid magma", "Ethereal Shibari Muse suspended in a complex geometry of glowing bioluminescent ropes", "Cyber-Goth Dominatrix clad in high-gloss seamless latex armor with a digital visor", "Imperial Harem Concubine draped in nothing but sheer spider-silk and gold jewelry", "Corrupted Battle-Nun with tattered ceremonial robes revealing profane runic tattoos", "Playful Neko-Maid with realistic fluffy ears and a micro-apron of finest silk", "Exhibitionist Netrunner wearing only a transparent holographic raincoat in the rain", "Glistening Oil-Slicked Gladiator standing victorious in a muddy fighting pit", "Submissive Android Doll with exposed porcelain joints and vacant glowing eyes", "Vampire Countess lounging in a clawfoot bathtub filled with crimson rose petals", "Bondage Fairy tangled helplessly in glowing organic vines and nectar", "Hypnotized Mind-Thrall with swirling spiral irises and a slack, blissful jaw", "Buxom Dairy Maid in a torn gingham dress drenched in morning dew", "Exotic Pole Dancer spinning gracefully on a vertical beam of solid laser light", "Wet-Look Siren with translucent iridescent scales and water droplets on skin", "Lingerie Succubus teasing the viewer with a velvet heart-shaped tail", "Pet-Play Kitten wearing a diamond-studded collar and delicate silver bell", "Bedroom Streamer bathed in the soft glow of pink and blue ring lights", "Tentacle-Worshipping Cultist wrapped in ceremonial chains and wet silk", "Rebellious Sorority Girl with a ruined uniform and a defiant, lustful glare"];
        const neutralSubjects = ["Cyberpunk Mercenary", "Futuristic Android", "Post-Apocalyptic Survivor", "Alien Diplomat", "Time Traveler", "Cloaked Figure", "Masked Vigilante", "Robot", "Ghost", "Demon", "Angel", "Elemental Spirit"];

        const maleGenderList = ["-None-", "a man", "a male", "a boy", "an elderly man", "a young man", "a gentleman", "a handsome man"];
        const femaleGenderList = ["-None-", "a female", "a woman", "a girl", "an elderly woman", "a young woman", "a lady", "a beautiful woman"];
        const allGenderList = ["-None-", "a female", "a woman", "a man", "a male", "a girl", "a boy", "an elderly woman", "an elderly man", "a non-binary person"];

        const activityList = ["-None-", "Standing defiantly atop a crumbling mountain peak amidst a storm", "Sitting regally on an ancient throne of woven roots and blooming flowers", "Sprinting through a neon-lit cybernetic alleyway with motion blur", "Leaping across a chasm with an explosion of debris behind", "Walking confidently through a frozen battlefield where time has stopped", "Dancing wildly in a trance under a bioluminescent waterfall", "Locked in fierce combat, clashing blades with sparks flying in slow motion", "Meditating while floating in a lotus position surrounded by arcane glyphs", "Singing an operatic aria on a grand stage bathed in spotlight", "Kneeling in devout prayer before a glowing monolithic statue", "Weeping silently with a single crystalline tear rolling down a porcelain cheek", "Laughing joyously with head thrown back under a shower of golden confetti", "Leaning effortlessly against a hovering futuristic vehicle in a rainy metropolis", "Floating weightlessly in zero gravity surrounded by floating water droplets", "Inspecting a glowing magical artifact with intense curiosity", "Holding a lantern aloft in a dense, foggy Victorian street", "Commanding a massive starship from a holographic bridge", "Reading forbidden scrolls by the light of a melting candle", "Dodging a laser blast with superhuman reflexes", "Performing a dark ritual in a circle of salt and crimson runes", "Sipping tea elegantly in a lush, sun-drenched conservatory", "Adjusting complex steampunk goggles while analyzing a map", "Sketching rapidly in a notebook while perched on a gargoyle", "Playing a violin made of glass that emits spectral light", "Scaling the glass exterior of a skyscraper at night", "Whispering a secret into the ear of a shadow creature", "Balancing precariously on a tightrope over a city of gold", "Emerging triumphantly from a swirling dimensional portal", "Analyzing a crime scene with high-tech augmented reality vision", "Basking in the warm glow of a binary sunset", "Casting a cataclysmic spell with hands wreathed in fire", "Wading through a swamp of glowing lotuses and mist", "Reclining luxuriously on a velvet chaise lounge in a boudoir", "Peering through a brass telescope at a distant burning planet", "Fixing a sparking mechanical arm with gritty determination", "Sharpening a serrated blade while staring intensely at the viewer", "Summoning a colossal elemental beast from a rift in the sky", "Navigating a steampunk airship through a chaotic lightning storm", "Merging physically with a bioluminescent alien forest", "Forging a legendary sword on an anvil made of a dying star", "Conducting a symphony of floating spectral instruments in a haunted ballroom", "Hacking into a mainframe with holographic keyboards projecting from fingertips", "Emerging triumphantly from a pool of liquid gold", "Stargazing from the edge of a cliff overlooking a vibrant nebula", "Disintegrating into a swarm of cybernetic butterflies", "Walking calmly through a rain of falling cherry blossom petals and ash", "Soaring in a graceful grand jet√© mid-air", "Balanced perfectly in an elegant arabesque", "Executing a dramatic and passionate tango dip", "Spinning rapidly in a vibrant flamenco dress", "Frozen in an expressive contemporary dance leap", "Stomping rhythmically in a powerful tribal dance", "Whirling transcendently in a Sufi dervish spin", "Swaying hypnotically to a mystical rhythm", "Caught in a gravity-defying breakdance freeze", "Leaping energetically in a spirited folk dance", "Gliding effortlessly in a spectral moonwalk", "Arching back in a sensual and fluid motion", "Commanding the floor with a high-energy hip-hop stance", "Balancing delicately en pointe on a marble floor", "Swinging joyfully in a vintage lindy hop", "Moving with serpentine grace in a belly dance", "Striking a sharp and angular vogue pose", "Floating weightlessly in a cosmic space waltz", "Twirling amidst a whirlwind of flowing silk ribbons", "Engaged in a fierce and acrobatic capoeira flow"];
        const femaleActivityList = ["-None-", "Striking a high-fashion vogue pose with angular limbs", "Sitting elegantly with crossed legs on a velvet chair", "Executing a graceful ballet arabesque", "Curtsying deeply in a grand ballroom", "Spinning wildly in a flowing dress", "Blowing a kiss to the camera", "Adjusting a garter with a coy expression", "Arching back sensually on a chaotic bed", "Walking with a confident supermodel strut", "Applying lipstick while looking in a compact mirror", "Dancing a tribal bellydance with fluid hip movements", "Lounging like a pin-up model on the beach", "Holding a wine glass with sophisticated grace", "Praying with hands clasped and head bowed reverently", "Floating effortlessly in zero gravity", "Casting a spell with glowing fingertips", "Looking over shoulder with a mysterious allure", "Sipping tea in a sunlit garden", "Reading a grimoire by candlelight", "Stretching arms overhead in a morning yawn"];
        const maleActivityList = ["-None-", "Standing in a commanding general's power stance", "Drawing a broadsword from a back scabbard", "Adjusting a tie with suave precision", "Flexing biceps in a display of raw strength", "Smoking a cigar in a shadowy noir alley", "Sitting manspread on a throne of skulls", "Sharpening an axe by a campfire", "Performing a haka war dance with intense energy", "Saluting with military discipline", "Crossing arms defiantly across a broad chest", "Resting a heavy weapon on one shoulder", "Walking away from an explosion without looking back", "Drinking a tankard of ale in a rowdy tavern", "Inspects a pocket watch with impatience", "Clenching fists in preparation for a brawl", "Leaning coolly against a muscle car", "Sprinting into battle with a war cry", "Meditating in a monk's lotus position", "Hackng a terminal with rapid keystrokes", "Looking at the horizon with a thousand-yard stare"];
        const nsfwActivityList = ["Suspended weightlessly in a kaleidoscope of neon shibari ropes", "Arching back in pure sensory ecstasy while covered in warm massage oil", "Kneeling in absolute devotion on a plush velvet pillow with a studded collar", "Struggling beautifully against metallic tentacles wrapped tight around limbs", "Bent over a vintage mahogany desk with a skirt hiked up high in disarray", "Displayed inside a high-tech glass containment cylinder filling with euphoric mist", "Spreading legs wide while reclining back on a luxurious white fur rug", "Slowly pulling down silk panties with a teasing and intense stare", "Locked in an ornate wooden pillory with a look of beautiful, tragic distress", "Riding a velvet mechanical bull with glistening sweat highlighting every curve", "Pressed tightly against a wet glass window leaving steamy handprints", "Tied securely to a four-poster bed with flowing red silk ribbons", "Enduring a sensory overload session with a silk blindfold and dripping wax", "Crawling seductively across the floor with a deeply arched feline back", "Holding a leather riding crop with a cruel and dominant queen's sneer", "Gagged with a fine silk scarf while looking up with wide, pleading eyes", "Captured in a sticky, glowing bioluminescent spider web", "Wearing a chastity belt made of intricate filigree gold and rubies", "Deep-throating a lollipop with deliberate, intense, and unwavering eye contact", "Flexing in a latex vacuum bed with only the face exposed and gasping"];

        const handPositionList = ["-None-", "hands at sides", "hands on hips", "arms crossed", "hands in pockets", "hands behind head", "one hand raised", "waving", "reaching towards the sky", "tracing a glowing rune in the air", "gripping a pulsating orb", "adjusting a tie or collar", "brushing hair behind the ear", "clutching a locket tightly", "offering a single red rose", "shading eyes from the bright sun", "holding a dagger hidden behind back", "one hand in pocket and one waving", "fingers interlaced on lap", "cradling a wounded bird", "counting on fingers", "tapping chin thoughtfully", "making a dramatic spellcasting gesture", "hands raised in surrender", "gripping a steering wheel", "playing with a necklace chain", "holding a smoking pipe", "wiping a tear from cheek", "pointing accusingly", "covering mouth in shock", "hands pressed together in greeting", "holding a wine glass loosely", "gripping a weapon hilt", "resting chin on hand", "running fingers through hair"];

        const expressionList = ["-None-", "Radiating a serene and ethereal calm like a morning lake", "A subtle, enigmatic Mona Lisa smile of hidden secrets", "Eyes sparkling with unshed tears of overwhelming joy", "A playful and mischievous smirk tugging at the corner of the mouth", "Gazing upward with an expression of divine revelation", "Brows furrowed in deep, philosophical contemplation", "A look of gentle, maternal warmth and unconditional love", "Eyes widened in a sudden, breathtaking realization", "A melancholic gaze fixed wistfully on a distant horizon", "Bursting with uncontainable, infectious laughter", "A stoic and hardened stare of unwavering determination", "Lips pressed together in a mix of resolve and hesitation", "A soft, dreamy expression of romantic longing", "Caught in a moment of pure, childlike wonder", "A sharp, piercing glare that cuts through the soul", "Face illuminated by a look of triumphant victory", "A vulnerable and open expression of raw honesty", "Squinting slightly in suspicious yet curious judgment", "A relaxed and contented sigh captured in time", "Cheeks puffed out in a playful, childish pout", "A look of terrified awe in the face of the sublime", "Biting the lower lip in nervous anticipation", "A peaceful expression of absolute zen meditation", "Eyes closed tight in a silent, desperate prayer", "A commanding sneer of absolute regal authority", "Cheeks flushed deep crimson with rising heat and desire", "Lips trembling slightly, parted in a soft moan of surrender", "Eyelids heavy and half-closed in a haze of pure intoxication", "A look of intense, unbridled hunger mixed with adoration", "Head thrown back in a moment of overwhelming sensory bliss", "Eyes rolled back slightly in a trance of exquisite pleasure", "Biting the lip hard to suppress a loud cry of ecstasy", "A sweaty, breathless expression of post-climax exhaustion", "Pupils blown wide with a rush of adrenaline and lust", "A glistening, open-mouthed pant of raw endurance", "Face contorted beautifully in the sweet agony of release", "A feral, predatory grin of dominance and control", "Tears streaming down a flushed face in emotional overload", "A dazed and drooling expression of mind-breaking pleasure", "Tongue lolling slightly in a completely broken, blissed-out state", "A desperate, pleading look begging for more intensity", " lips wrapped around a finger in a seductive tease", "A shy, averted gaze while blushing furiously from praise", "A dark, lustful stare promising wicked intentions", "Face buried in a pillow, muffled and overwhelmed", "A vacuous, empty-headed look of bimbo-fication hypnosis", "Grimacing while holding back a wave of intense sensation", "A soft, glazing-over of the eyes as consciousness slips", "Smiling sweetly while enduring intense physical stimulation", "The aftermath glow: messy hair and a satisfied, sleepy smile"];
        const femaleExpressionList = ["-None-", "A mysterious Mona Lisa smile", "Eyes sparkling with unshed tears", "A playful and mischievous wink", "Biting lip in nervous anticipation", "Radiating maternal warmth and love", "A seductive heavy-lidded gaze", "Pouting playfully", "Wide-eyed innocence and wonder", "A serene and ethereal calm", "Giggling with pure joy", "A look of terrified vulnerability", "Blushing deeply with shy embarrassment", "A cold and haughty queen's sneer", "Lost in romantic daydreaming", "A determined and fierce shield-maiden glare", "Softly singing a lullaby", "A look of divine revelation", "Tears streaming down a porcelain face", "A dazzling hollywood smile", "Whispering a secret"];
        const maleExpressionList = ["-None-", "A rugged, weather-beaten stare of experience", "A charismatic James Bond smirk", "Gritting teeth in pure berserker rage", "A cold, calculating mob boss gaze", "Winking playfully with boyish charm", "A thousand-yard stare of a war veteran", "A stoic and emotionless mask", "Roaring with laughter at a crude joke", "A focused sniper's squint", "Sneering with arrogant superiority", "A grimace of pain and endurance", "Looking down with kingly authority", "A jaw set in absolute determination", "Raising an eyebrow in skepticism", "A feral, predatory grin", "Shouting commands with authority", "A look of fatherly pride", "Eyes burning with magical energy", "A melancholic brooding expression", "Spitting blood with a defiant grin"];
        const nsfwExpressionList = ["A transcended expression of mind-numbing ecstasy with eyes rolled back", "A vacant, hypnotized stare of absolute surrender and mental emptiness", "Drooling slightly with a hazy, glazed-over look of intoxication", "Panting heavily with a flushed, sweaty face and dilated pupils", "Biting down hard on a gag with panicked, tear-filled eyes", "A look of overwhelming sensory overload and shattered composure", "Eyes crossed in pure, unadulterated, brain-melting bliss", "Screaming silently in a moment of supreme ecstatic release", "A dominant sneer of absolute sadistic control and pleasure", "Looking down with a cruel, mocking, and superior laugh", "Tears of pure pleasure streaming down flushed, heated cheeks", "Lip bitten until bleeding in a suppressed, desperate urge", "A vacant doll-like stare of total programmed hypnosis", "Desperate, pleading puppy-dog eyes begging for release", "A feral snarl of primal, uncontrolled lust", "Cheeks puffed out holding breath in trembling anticipation", "A sweaty, exhausted, and satisfied afterglow smile", "Eyes squeezed shut in intense, concentrating pleasure", "Mouth agape in silent shock and overwhelming awe", "A wicked, predatory grin promising deviant and sinful acts"];

        const bodyTypeList = ["-None-", "athletic", "Herculean", "ripped", "toned", "curvy", "voluptuous", "hourglass", "busty", "Willowy frame", "slender", "petite", "tall", "average", "full-figured", "lithe dancer's build", "heavy powerlifter physique", "cybernetically enhanced body", "glowing ethereal form", "rugged battle-scarred frame", "soft renaissance curves", "wiry marathon runner build", "towering giantess stature", "petite fairy-like frame", "broad swimmer's shoulders", "sinewy rock climber build", "voluptuous pin-up figure", "lean martial artist physique", "stocky fantasy dwarf build", "elongated alien proportions", "gelatinous slime form", "crystalline body structure", "mechanical steampunk torso", "shadowy silhouette form", "ancient withered frame", "heroic comic book proportions", "willowy high-fashion build", "heavily tattooed physique", "bioluminescent skin", "agile gymnast build"];
        const femaleBodyTypeList = ["-None-", "hourglass figure", "voluptuous", "curvy", "petite", "slender", "willowy", "athletic toned", "soft and chubby", "busty", "pear-shaped", "tall Amazonian", "lithe dancer's build", "fleshy renaissance build", "delicate fairy-like frame", "cybernetically enhanced female body", "pregnant", "wide hips", "flat chested", "gymnast build"];
        const maleBodyTypeList = ["-None-", "V-taper bodybuilder physique", "lean swimmer's build", "massive strongman bulk", "rugged lumberjack frame", "wirey martial artist build", "broad soldier shoulders", "beer belly dad bod", "towering giant stature", "ripped 8-pack abs", "brawlers thick neck", "lanky and tall", "stocky dwarven build", "heroic comic book proportions", "heavyweight boxer build", "gaunt and withered", "cybernetically enhanced male body", "wiry rock climber", "barrel-chested", "defined aesthetic muscles"];
        const nsfwBodyTypeList = ["Shortstack: tiny height with massive, exaggerated curves", "Synthetic Perfection: hyper-stylized proportions with a porcelain finish", "Thicc: extremely heavy lower body distribution with thunder thighs", "Spinner: incredibly petite, flexible frame with a tight core", "Amazonian Muscle Mommy: overpowering muscular definition and height", "Soft and Doughy: ultra-plush, squishy texture inviting touch", "BBW: very large, soft, and voluptuous frame with deep curves", "Gothic-Chic: visible ribs and hip bones with pale skin", "Milky Pale: translucent skin showing delicate blue veins", "Oiled Hardbody: glistening muscles with zero body fat and high shine", "Sun-Kissed: distinct bikini tan lines on bronzed skin", "Rubber-Doll: seamless, synthetic skin texture with no blemishes", "Hyper-Busty: anime-style exaggerated chest defying gravity", "Pear-Goddess: massive hips paired with a impossibly tiny waist", "Androgynous Beauty: ambiguous, delicate features with a lean frame", "Hairy Natural: unshaven, natural body hair aesthetics", "Realism: textured skin with stretch marks and imperfections", "Sweaty and Grimy: skin covered in realistic fluids and dirt", "Latex-Clad: body seamlessly merged with tight, shiny material", "Bio-Organic: skin merging with chitinous alien carapace"];

        const faceTypeList = ["-None-", "Oval face", "Round face", "Square face", "Heart-shaped face", "Long face", "Diamond-shaped face", "Chiseled jawline", "Soft features", "Sharp angular features", "Angular face", "Symmetrical face", "High cheekbones", "Plump cheeks", "Freckles", "Dimples", "Strong brow", "Double chin", "Baby face", "Gaunt", "Weathered", "Pixie-like features", "Aristocratic nose", "Full lips", "Heterochromia eyes", "Sharp elven ears", "Scarred face"];
        const hairStyleList = ["-None-", "Long flowing hair", "Short pixie cut", "Bob cut", "Shoulder-length waves", "Messy bun", "High ponytail", "Twin tails (pigtails)", "Intricate viking braids", "French braid", "Slicked back hair", "Undercut", "Mohawk", "Afro", "Dreadlocks", "Cornrows", "Bald", "Buzz cut", "Spiky anime hair", "Side-swept bangs", "Hime cut", "Victory rolls (vintage)", "Beehive hairstyle", "Curtain bangs", "Wild unkempt hair", "Wet hair", "Windblown hair", "Cyberpunk neon dreads"];
        const femaleHairStyleList = ["-None-", "Long flowing hair", "Short pixie cut", "Bob cut", "Shoulder-length waves", "Messy bun", "High ponytail", "Twin tails (pigtails)", "Intricate viking braids", "French braid", "Hime cut", "Victory rolls (vintage)", "Beehive hairstyle", "Curtain bangs", "Wild unkempt hair", "Wet hair", "Windblown hair", "Cyberpunk neon dreads", "Floor-length Rapunzel hair", "Side-swept bangs"];
        const maleHairStyleList = ["-None-", "Short military buzz cut", "Slicked back pompadour", "Messy surfer waves", "Samurai top knot", "Viking braids with undercut", "Classic side part", "Bald with full beard", "Dreadlocks tied back", "Short curly fade", "Mullet", "Mohawk", "Caesar cut", "Spiky anime hair", "Gelled business cut", "Bald head", "Stubble and short hair", "Long rocker hair", "Handlebar mustache and slick hair", "Goatee and short crop"];
        const eyeColorList = ["-None-", "Blue eyes", "Green eyes", "Brown eyes", "Hazel eyes", "Grey eyes", "Amber eyes", "Violet eyes", "Black eyes", "Ice blue eyes", "Emerald green eyes", "Golden eyes", "Red eyes (albino)", "Glowing blue eyes", "Glowing red eyes", "Heterochromia (blue and green)", "Blind white eyes", "Cybernetic eyes", "Reptilian slit pupils", "Galaxy-filled eyes"];

        const breastTypeList = ["-None-", "Voluptuous natural breasts", "Petite perky breasts", "Heavily weighted bosom", "Perfectly round silicone breasts", "Soft and sagging natural form", "High-set firm breasts", "Wide-set natural breasts", "Deep cleavage", "Over-sized anime aesthetic", "Modest athletic chest", "Gravity-defying anime breasts", "Small and delicate form", "Full and heavy figure", "Soft pillow-like chest", "Bountiful curves", "Generous bust", "Sculpted aesthetic form"];
        const nsfwBreastList = ["Vintage 1950s conical silhouette with perky, gravity-defying lift", "Overwhelmingly heavy bosom with realistic soft-body physics", "Petite and flat chest with delicate, sensitive features", "Natural asymmetric breasts with realistic uneven weight", "High-gloss oiled breasts reflecting studio lighting", "Pale, translucent breasts with visible blue veins beneath the skin", "Side-boob spilling generously out of tight clothing", "Underboob visible with a high-lift top", "Pressed tightly together creating a deep, sweaty valley", "Surgically enhanced aesthetic with perfect roundness and scars", "Fantasy physics: floating, weightless breasts in zero gravity", "Liquid physics: heavy wobble and movement captured in motion", "Glistening wet skin texture on chest with water droplets", "Lactating slightly with milk dripping from the tips", "Pierced with heavy silver chains connecting the nipples", "Covered in thick, sticky oil or slime", "Taped down with black electrical tape in a cross pattern", "Exposed clearly through sheer, wet, clinging fabric", "Squished flat against a glass surface", "Bound tightly in shibari ropes accentuating the shape"];

        const nippleTypeList = ["-None-", "Delicate puffy pink nipples", "Prominent dark nipples", "Hard erect nipples", "Inverted shy nipples", "Large distinct areolas", "Small pale areolas", "Dark brown areolas", "Soft rose-colored nipples", "Pierced nipples (silver barbell)", "Pierced nipples (gold ring)", "Visible through sheer fabric", "Pointy perky nipples"];
        const nippleShapeList = ["-None-", "Round distinct areolas", "Oval shaped areolas", "Heart-shaped pasties", "X-shaped tape", "Star-shaped pasties", "Gold nipple chains", "Latex pasties", "Sequin pasties"];
        const vaginaTypeList = ["-None-", "Smooth porcelain mons", "Neatly trimmed landing strip", "Natural unshaven aesthetics", "Plump and puffy vulva", "Modest innie", "Prominent butterfly labia", "Glistening wet arousal", "Tight petite gap", "Soft fleshy mound", "Visibly aroused form", "Delicate pink folds", "Darker pigmented labia", "Pierced clitoral hood", "Pierced labia rings"];
        const vaginaShapeList = ["-None-", "Tucked neat form", "Full puffy lips", "Exposed clitoris", "Cameltoe through fabric", "Parted lips", "Closed lips", "Symmetrical aesthetic", "Asymmetrical natural form"];

        const pelvisList = ["-None-", "wide hips", "narrow hips", "curvy hips", "hourglass hips", "slender hips", "boyish hips", "high-set hips", "low-set hips", "child-bearing hips", "hip dips", "flared hips", "rounded hips", "bony hips", "prominent hip bones", "anterior pelvic tilt", "posterior pelvic tilt", "violin hips", "strong hips", "Deeply set hip joints", "narrow pelvis", "full hips", "generous hips", "bubble butt", "Sculpted gluteal definition", "heart-shaped buttocks", "perky buttocks", "flat buttocks", "small buttocks", "Heavy lower body distribution", "wide hips and small waist", "thigh gap", "prominent buttocks", "muffin top"];
        const femalePelvisList = ["-None-", "wide hips", "narrow hips", "curvy hips", "hourglass hips", "slender hips", "child-bearing hips", "hip dips", "flared hips", "rounded hips", "prominent hip bones", "anterior pelvic tilt", "violin hips", "full hips", "generous hips", "bubble butt", "heart-shaped buttocks", "perky buttocks", "flat buttocks", "small buttocks", "heavy lower body distribution", "wide hips and small waist", "thigh gap", "prominent buttocks", "muffin top"];
        const malePelvisList = ["-None-", "Narrow athletic hips", "Muscular glutes", "Strong quadriceps definition", "V-cut abs leading downwards", "Bulky powerlifter legs", "Lean runner's legs", "Solid trunk", "Square hips", "Defined adonis belt", "Heavy muscular thighs", "Tight glutes", "Flat buttocks", "Strong lower back"];

        const headJewelleryList = ["-None-", "Diamond tiara", "Royal gold crown", "Floral diadem", "Ancient Greek golden laurel wreath", "Intricate Indian bridal Maang Tikka with rubies", "Renaissance pearl-encrusted hair net (snood)", "Russian Kokoshnik headdress with embroidery", "Viking bronze circlet with runic engravings", "Art Deco diamond headband with geometric patterns", "Gothic black lace veil", "Jade hairpin (Chinese style)", "Golden butterfly hair clips", "Tribal feather headdress", "Futuristic holographic halo", "Velvet ribbon headband"];
        const earJewelleryList = ["-None-", "Gold hoop earrings", "Diamond stud earrings", "Dangle earrings", "Ear cuffs", "Traditional heavy gold Indian Jhumka bells", "Victorian jet black mourning earrings", "Egyptian lapis lazuli drop earrings", "Native American turquoise and silver feather earrings", "Modernist asymmetric geometrical earrings", "Elven ear cuffs wrapping the entire ear", "Pearl chandelier earrings", "Sapphire ear climbers", "Tribal gauge plugs", "Cybernetic data-port earpiece"];
        const neckJewelleryList = ["-None-", "Diamond necklace", "Pearl strand", "Velvet choker", "Spiked punk choker", "Ancient Egyptian faience broad collar (Usekh)", "African Maasai colorful beaded neck ruff", "Celtic bronze torc with twisted metal design", "Victorian gothic velvet choker with a cameo", "Pre-Columbian jade pectoral necklace", "1920s long pearl sautoir necklace with tassel", "Heavy gold chain (Hip-hop style)", "Delicate silver locket", "Glowing magic amulet", "Cybernetic collar with lights"];
        const armJewelleryList = ["-None-", "Gold bracelet", "Silver cuff", "Charm bracelet", "Roman serpentine gold armlet (upper arm)", "Traditional Chinese jade bangle bracelet", "Viking twisted silver arm ring", "Indian glass bangles (chooda) in vibrant red", "Steampunk leather bracer with brass gears", "Art Nouveau enamelled insect bracelet", "Golden wonder woman cuffs", "Tribal bone armbands", "Holographic wrist interface", "Henna-style hand chain connector", "Snake-shaped coil bracelet"];
        const handJewelleryList = ["-None-", "Diamond engagement ring", "Wedding band", "Signet ring", "Knuckle rings", "Renaissance poison ring with a hidden compartment", "Ottoman archer's thumb ring in jade", "Gothic full-finger articulated armor ring", "Claddagh ring symbolising love and loyalty", "Bishop's massive amethyst signet ring", "Mehndi-style slave bracelet with ring attached", "Multiple stackable midi rings", "Obsidian ritual ring", "Cybernetic finger claw", "Ruby cocktail ring"];

        const maleUpperBody = ["-None-", "t-shirt", "wet t-shirt", "tank top", "hoodie", "turtleneck sweater", "v-neck sweater", "crewneck sweater", "cable-knit sweater", "flannel shirt", "button-down shirt", "polo shirt", "leather jacket", "denim jacket", "bomber jacket", "trench coat", "blazer", "sci-fi armor (chest)", "fantasy armor (chest)", "knight's breastplate", "chainmail", "mage robes", "lab coat", "space suit (torso)", "suit jacket", "vest", "poncho", "fur coat", "windbreaker", "mesh top", "academic robe", "vicar's collar", "school uniform shirt", "bondage harness (chest)", "latex corset", "choker"];
        const femaleUpperBody = ["-None-", "t-shirt", "wet t-shirt", "tank top", "hoodie", "turtleneck sweater", "v-neck sweater", "crewneck sweater", "cable-knit sweater", "flannel shirt", "button-down shirt", "polo shirt", "blouse", "silk blouse", "crop top", "tube top", "bandeau top", "off-shoulder top", "halter top", "leather jacket", "denim jacket", "bomber jacket", "trench coat", "blazer", "sports bra", "corset", "bustier", "camisole", "sci-fi armor (chest)", "fantasy armor (chest)", "knight's breastplate", "chainmail", "mage robes", "lab coat", "space suit (torso)", "bikini top", "lingerie top", "bra", "kimono (upper)", "suit jacket", "vest", "peasant top", "poncho", "fur coat", "windbreaker", "see-through shirt", "mesh top", "academic robe", "sari top (choli)", "school uniform shirt", "bodysuit", "lace bra", "push-up bra", "sheer blouse", "plunging neckline top", "deep cleavage top", "strappy top", "backless top", "leather corset", "satin camisole", "underboob crop top", "latex top", "fishnet top", "harness", "micro bikini top", "sheer bra", "vinyl top", "cut-out top", "silk robe (open)", "bondage top", "open-cup bra", "cupless bra", "strappy bra", "bondage harness (chest)", "nipple pasties", "sheer robe (closed)", "latex corset", "vinyl bustier", "chain top", "choker with leash", "fishnet body stocking (upper)", "wetlook top", "extremely low-cut top", "underbust corset", "sheer turtleneck", "strapless bra", "transparent shirt", "string bikini top", "see-through hoodie", "choker", "shawl"];
        const maleLowerBody = ["-None-", "jeans", "ripped jeans", "skinny jeans", "baggy jeans", "sweatpants", "yoga pants", "leather pants", "denim shorts", "cargo shorts", "athletic shorts", "business slacks", "cargo pants", "chaps", "sci-fi armor (legs)", "fantasy armor (legs)", "knight's greaves", "mage's skirt", "space suit (legs)", "briefs", "boxers", "sarong", "kimono (lower)", "loincloth", "suit pants", "trousers", "kilt", "jodhpurs (riding pants)", "bondage pants", "vinyl pants", "wet leggings", "latex pants", "chaps (no pants)"];
        const femaleLowerBody = ["-None-", "jeans", "ripped jeans", "skinny jeans", "baggy jeans", "bell-bottoms", "sweatpants", "yoga pants", "leggings", "leather pants", "denim shorts", "cargo shorts", "athletic shorts", "boy shorts", "daisy dukes", "miniskirt", "pleated skirt", "plaid skirt", "pencil skirt", "long skirt", "A-line skirt", "ballroom skirt", "business slacks", "cargo pants", "chaps", "sci-fi armor (legs)", "fantasy armor (legs)", "knight's greaves", "mage's skirt", "space suit (legs)", "bikini bottom", "lingerie bottom", "thong", "g-string", "panties", "briefs", "boxers", "sarong", "kimono (lower)", "loincloth", "suit pants", "trousers", "capri pants", "tutu", "kilt", "jodhpurs (riding pants)", "tights", "fishnet stockings", "garter belt", "sari (lower)", "micro skirt", "leather miniskirt", "vinyl miniskirt", "lace panties", "sheer panties", "see-through skirt", "high-slit skirt", "latex skirt", "latex leggings", "cheeky shorts", "booty shorts", "bondage pants", "micro bikini bottom", "see-through pants", "open-front skirt", "vinyl pants", "wet leggings", "low-rise jeans (showing panties)", "crotchless panties", "strappy panties", "lace thong", "vinyl panties", "latex panties", "string bikini bottom", "garter belt with stockings", "thigh-high stockings", "sheer stockings", "fishnet body stocking (lower)", "bondage harness (legs)", "see-through leggings", "wetlook leggings", "super short shorts", "open-back panties", "side-slit skirt (high)", "unzipped jeans", "satin panties", "chaps (no pants)", "extremely short skirt", "leg warmers", "ankle socks"];
        const maleFootwearList = ["-None-", "sneakers", "running shoes", "dress shoes", "oxfords", "brogues", "loafers", "derby shoes", "monk straps", "boots", "chelsea boots", "desert boots", "work boots", "hiking boots", "combat boots", "sandals", "flip-flops", "slippers", "boat shoes", "canvas shoes", "high-top sneakers", "skate shoes", "basketball shoes", "military boots", "cowboy boots", "wellington boots", "galoshes", "driving shoes", "espadrilles (men's)", "moccasins", "crocs (men's)", "barefoot"];
        const femaleFootwearList = ["-None-", "heels", "stiletto heels", "block heels", "kitten heels", "wedge heels", "platform heels", "pumps", "Glass slippers", "ballet flats", "sandals", "gladiator sandals", "flip-flops", "wedges", "boots", "ankle boots", "knee-high boots", "thigh-high boots", "combat boots", "cowboy boots", "sneakers", "running shoes", "loafers", "slippers", "espadrilles", "mary janes", "mules", "oxford shoes (women's)", "derby shoes (women's)", "strappy heels", "open-toe heels", "peep-toe heels", "clear heels", "fishnet heels", "lace-up heels", "barefoot", "platform sneakers", "fur boots", "moon boots", "Ugg boots", "strappy sandals", "clogs", "high-heel pumps", "Mary Jane heels", "ankle-strap heels", "slingback heels", "thigh-high leather boots", "thigh-high suede boots", "gogo boots", "Doc Martens", "roller skates", "ice skates", "platform boots", "satin heels", "velvet heels", "patent leather heels", "socks and heels", "socks and sandals", "Converse (female)", "ballerina slippers", "high heels (platform)"];
        const subjectTypeList = ["-None-", "A photorealistic portrait of", "A digital art painting of", "A cinematic film still of", "A 3D render of", "A watercolor painting of", "A comic book panel of", "A high-fashion photo of", "An intricate character concept sheet of", "A wildlife photograph of", "A close-up macro photo of", "An architectural rendering of", "A food photography shot of", "A technical schematic of", "A simple logo of", "A detailed landscape of"];
        const styleList = ["-None-", "Celestial Baroque: ornate gold filigree meets cosmic nebulas", "Cybernetic Renaissance: Da Vinci aesthetics with high-tech circuitry", "Eldritch Art Nouveau: swirling organic horror with elegant Alphonse Mucha lines", "Bioluminescent Solarpunk: nature fused with glowing organic technology", "Grimdark Gothic Sci-Fi: Warhammer 40k aesthetic, heavy armor, dark grandeur", "Translucent Crystalism: everything made of stained glass and refracting light", "Liquid Gold Kintsugi: broken reality repaired with flowing molten gold", "Neon-Noir Impressionism: rainy cyberpunk streets painted with thick oil brushstrokes", "Unreal Engine 5.4 Nanite Render: Billions of polygons, absolute realism", "Weta Digital VFX Style: Movie-quality CGI, subsurface scattering, pore-level detail", "Riot Games Splash Art: Hyper-stylized, dramatic lighting, heroic proportions", "Studio Ghibli x Cyberpunk: lush hand-painted backgrounds with neon tech", "Dark Souls Concept Art: fading grandeur, fog, massive scale, decay", "Alex Ross Realism: Gouache painting, heroic lighting, realistic fabrics", "H.R. Giger Biomechanical: organic fused with industrial, monochromatic, terrifying", "Makoto Shinkai Cloudscape: Hyper-vibrant skies, lens flares, emotional atmosphere", "Iridescent Holography: shimmering pearlescent colors, futuristic fashion", "Obsidian and Marble: high contrast black and white stone textures", "Vaporwave Glitch Art: VHS static, pink/blue gradients, marble statues", "Etched Copperplate: vintage money aesthetic, incredibly fine lines", "Double Exposure Silhouette: galaxy trapped inside a human shape"];
        const effectList = ["-None-", "Zero-Gravity Suspension: Water droplets and debris floating in air", "Quantum Disintegration: Subject turning into digital cubes/pixels", "Floral Overgrowth: Vines and flowers rapidly blooming on the subject", "Chromatic Aberration (Glitch): RGB color splitting at the edges", "Diamond Dust: Air filled with glittering microscopic crystals", "Molten Gold Dripping: Thick liquid metal flowing over surfaces", "Energy Aura: Super-Saiyan style rising energy waves", "Nebula Infusion: Space dust and stars swirling around the body", "Shattered Glass Reality: The air cracking like a broken mirror", "Motion Blur Speed Lines: Intense feeling of velocity", "Burning Embers: Ash and fire particles swirling in the wind", "Data Stream Matrix: Green binary code raining in the background", "Spectral Ghosting: Faint motion trails following the subject", "Ink in Water: Smoke behaving like thick liquid ink"];
        const nsfwEffectList = ["Cinematic sauna atmosphere with heavy condensation dripping from skin", "Hyper-realistic glistening sweat texture mapping with subsurface scattering", "X-Ray translucency revealing artistic silhouette beneath fabric", "Sticky oil texture mapping with high specularity and reflection", "Pheromone haze: soft pink mist surrounding the subject", "Soft-focus Vaseline lens blur for a vintage romantic mood", "Heat haze distortion radiating visibly from body heat", "Wet skin shader with realistic flowing water physics", "High-gloss latex shine reflection mapping with studio lighting", "Subsurface scattering emphasizing flushed, heated skin tones", "Bioluminescent tattoos glowing softly on skin texture", "Realistic rope burns and red marks on skin texture", "Opaque milk-bath liquid simulation covering limbs", "Viscous slime dripping physics with realistic transparency", "Heavy breathing condensation cloud visible in cold air", "Ultraviolet blacklight revealing hidden glowing body paint", "Tear-streaked mascara running artistically down cheeks", "Goosebumps visible on high-resolution skin texture", "Natural flush gradient mapping on cheeks and chest", "Cinematic film grain emphasizing raw, gritty texture"];
        const backgrounds = ["-None-", "A sprawling cyberpunk metropolis drenched in acid rain and bathed in neon holograms", "An abandoned space station drifting silently through the wreckage of a planetary ring", "A pristine high-tech laboratory humming with the energy of pulsating quantum server racks", "A colossal Mars colony biodome glowing softly against the harsh crimson sunset", "A fortified underground bunker illuminated by the eerie red glow of emergency strobe lights", "A futuristic sky-city floating above a sea of clouds, connected by beams of light", "The bridge of an alien starship overlooking the event horizon of a swirling black hole", "A post-apocalyptic wasteland where nature has reclaimed rusting skyscrapers", "Ancient stone ruins reclaimed by glowing bioluminescent moss and twisted giant roots", "Majestic floating islands suspended in a golden sky, tethered by massive iron chains", "A mystical infinite library filled with hovering books and spiraling staircases of starlight", "A subterranean crystal cavern illuminating the darkness with pulsating prismatic light", "A dragon's lair filled with mountains of glittering gold coins and ancient artifacts", "An enchanted forest clearing where the trees weep glowing sap and fireflies dance", "A serene underwater temple covered in ancient algae and surrounded by exotic fish", "A steampunk clockwork city with massive brass gears turning slowly in the smoky sky", "A misty redwood forest piercing the fog, illuminated by sharp shafts of morning god rays", "A volatile volcanic landscape with rivers of molten lava carving through blackened rock", "A serene alpine lake acting as a perfect mirror for the Milky Way galaxy above", "A tropical waterfall cascading from a floating cliff into a crystal-clear turquoise lagoon", "Endless shifting desert dunes rippling under the heat of scorching binary suns", "A frozen arctic tundra beneath the shimmering curtain of a vibrant aurora borealis", "A coral reef teeming with alien sea life under the bioluminescent waves", "A storm-tossed ocean with massive waves crashing against jagged black cliffs", "A gritty, rain-slicked noir alleyway shrouded in steam rising from subway vents", "A luxurious hyper-modern penthouse featuring floor-to-ceiling glass overlooking a city", "A grand candlelit cathedral with kaleidoscope stained glass windows casting colored shadows", "A bustling Tokyo street market at night, crowded with lanterns and steam from food stalls", "An opulent Victorian drawing room draped in heavy velvet and filled with antique curiosities", "A haunted Gothic mansion corridor lined with portraits that seem to watch you", "A grime-covered industrial factory floor alive with flying sparks and grinding gears", "A peaceful Zen garden where cherry blossoms fall slowly onto raked white sand", "A cozy wizard's tower study cluttered with potions, scrolls, and a crackling fireplace", "A chaotic medieval battlefield strewn with banners and weapons in the mud", "A dimly lit master bedroom with disorganized satin sheets and scattered rose petals", "A steamy glass shower enclosure with water droplets obscuring the view", "A luxurious harem tent filled with plush silk pillows and golden hookahs", "A dark stone dungeon cell with iron chains hanging from damp walls", "A private, high-end massage room illuminated only by flickering aromatherapy candles", "A neon-lit nightclub VIP booth with velvet seating and low visibility", "A bubbling jacuzzi surrounded by snow, steam rising into the cold night air", "A messy backstage dressing room with bright vanity mirror lights and costumes", "A themed 'Love Hotel' room with mirrored ceilings and mood lighting", "A secluded hot spring hidden inside a misty cave", "A high-rise executive office at night, overlooking the city lights", "A tiled locker room filled with thick steam and slick surfaces", "A vintage four-poster bed draped in sheer, see-through lace curtains", "A futuristic containment cell with glowing energy fields and smooth white surfaces", "A private infinity pool at a villa, illuminated by underwater lights at night", "A seedy, neon-lit motel room with peeling wallpaper and blinds drawn shut", "A photography studio with a white cyclorama and professional strobe lighting", "A red-velvet lined throne room with a dark, seductive atmosphere", "A sun-drenched morning bed with white linens and harsh light streaming through blinds", "A narrow train cabin sleeper compartment with vintage upholstery"];
        const shotList = ["-None-", "Extreme Close-up Shot", "Close-up on eyes", "Close-up on lips", "Close-up on hands", "Insert Shot", "Cutaway Shot", "Close-up Shot", "Medium Close-up (MCU)", "Reaction Shot", "Medium Shot", "Two-Shot (two subjects)", "Over-the-Shoulder Shot", "Single Shot", "Snorricam Shot", "Cowboy Shot (mid-thigh up)", "Medium Long Shot (MLS)", "Full Shot", "Full Body Shot (Wide Shot)", "Three-Quarter Shot", "Profile Shot", "Hero Shot", "Silhouette Shot", "Wide Shot", "Master Shot", "Long Shot", "Extreme Long Shot", "Establishing Shot", "Weather Shot", "High-Angle Shot", "Overhead (Bird's Eye) Shot", "Top-Down Shot", "Crane Shot", "Low-Angle Shot", "Worm's Eye View", "Ground-Level Shot", "Trunk Shot", "Point of View (POV) Shot", "Dutch Angle (Tilted)", "Canted Angle", "Tracking Shot (Dolly Shot)", "Steadicam Shot", "Handheld Shot", "Zoom Shot (in/out)", "Dolly Zoom (Vertigo effect)", "Arc Shot (Orbit Shot)", "Money Shot", "B-Roll Shot"];
        const subjectPositionList = ["-None-", "in the center", "centered", "in the middle of the frame", "off-center", "rule of thirds (left)", "rule of thirds (right)", "in the foreground", "close to the camera", "in the background", "far in the distance", "at the top of the frame", "at the bottom of the frame", "in the left half of the frame", "in the right half of the frame", "in the upper-left corner", "in the upper-right corner", "in the lower-left corner", "in the lower-right corner", "silhouetted against the background", "framed by a doorway", "framed by a window", "looking out of frame", "looking into frame", "from behind", "back to the camera", "side profile", "three-quarters view", "facing the viewer", "partially obscured", "peeking from corner", "subject is large in frame", "subject is small in frame", "dynamic angle", "hero angle", "lying down", "lying on back", "lying on stomach", "lying on side", "kneeling", "crouching", "sitting on floor", "sitting in a chair", "leaning against a wall", "seen from above", "seen from below", "in profile", "close-up on face", "head and shoulders", "upper body", "full body", "in motion", "jumping in the air", "running towards camera", "walking away from camera", "squatting", "fetal position", "straddling", "legs spread", "kneeling on one knee", "sitting cross-legged", "leaning forward", "reclining", "mid-stride", "floating", "suspended in air", "half in shadow", "emerging from darkness", "sitting on a throne", "spread-eagle", "on all fours"];
        const cameraLensList = ["-None-", "Canon EOS 5D Mark IV + 85mm f/1.2L (The Gold Standard Portrait)", "Nikon D850 + 105mm f/1.4E ED (Ultimate Detail DSLR)", "Sony A7R V + 135mm f/1.8 GM (Hyper-Sharp Modern Portrait)", "Fujifilm GFX 100S + 110mm f/2 (Medium Format Digital Depth)", "Hasselblad X2D 100C (Studio Quality Medium Format)", "Canon EOS R5 + RF 50mm f/1.2L (Dreamy Modern Bokeh)", "Pentax 67 + 105mm f/2.4 (The 'Bokeh Monster' Film Look)", "Leica M6 + Summicron 35mm (Classic Analog Street Photography)", "Ricoh GR IIIx (High Contrast Black & White Street)", "Fujifilm X100VI (Classic Chrome Film Simulation)", "Leica Q3 + 28mm Summilux (Modern Wide Street Master)", "Canon AE-1 + 50mm f/1.8 (Vintage 80s Amateur Film Look)", "Olympus Pen-F (Half-Frame Grainy Aesthetic)", "Nikon F3 (Journalistic War Photography Style)", "Contax T2 (The '90s Celebrity Flash Snapshot Look)", "Sony A7R IV + 16-35mm GM (Epic Wide Landscapes)", "Nikon Z7 II + 14-24mm f/2.8 S (Ultra-Wide Nature Scenery)", "Phase One XF IQ4 150MP (Highest Resolution Fine Art)", "Linhof Master Technika (4x5 Large Format Film Detail)", "Hasselblad 500C/M (Square Format Analog Landscape)", "Ansel Adams Style View Camera (Black & White f/64 Group Style)", "DJI Mavic 3 Pro (High Altitude Drone Perspective)", "Arri Alexa Mini LF + Panavision Primo (Hollywood Blockbuster Look)", "Sony FX3 + Anamorphic Lens (Modern Indie Cinema)", "Blackmagic Pocket 6K (Raw Digital Film Aesthetic)", "IMAX 70mm Film Camera (Massive Epic Scope)", "Panavision Panaflex Millennium (Classic 90s Movie Film Stock)", "Super 8mm Vintage Camera (Retro Home Movie Grain)", "16mm Bolex H16 (Indie Arthouse Film Grain)", "Polaroid SX-70 (Instant Film Soft Dreamy Vintage)", "Kodak FunSaver Disposable Camera (90s Party Flash Vibe)", "GoPro Hero 12 (Ultra-Wide Action Fisheye)", "Holga 120N (Plastic Lens, Vignette, Light Leaks)", "Nikonos V (Underwater Analog Film)", "Game Boy Camera (8-bit Pixel Art Lo-Fi)", "Thermal Imaging Camera (Heat Map Aesthetic)"];
        const lightingList = ["-None-", "Volumetric God Rays piercing through heavy fog (Tyndall Effect)", "Bioluminescent Under-lighting (eerie glow from below)", "Cyber-Neon Rim Lighting (Pink and Blue distinct outlines)", "Eclipse Lighting: Subject silhouetted by a massive ring of fire", "Prismatic Light Diffraction: Rainbows refracting through crystal", "Rembrandt Chiaroscuro: High contrast extreme darks and focused lights", "Global Illumination (Ray Tracing): Bounced light filling the shadows", "Subsurface Scattering: Light glowing through skin/leaves (translucency)", "Cherenkov Radiation Glow: Intense magical blue underwater luminance", "Golden Hour Lens Flares: JJ Abrams style anamorphic streaks", "Storm Lightning Flash: Frozen millisecond of intense white light", "Candlelight Bokeh: Warm, flickering orange foreground blur", "Void Lighting: Pitch black background with single spotlight on subject", "Holographic Projection Light: Scanlines and digital noise illumination", "Caustics: Water reflection patterns dancing on the subject"];
        const qualityList = ["-None-", "Masterpiece, 8k, ultra-detailed, trending on ArtStation, sharp focus", "(Photorealistic:1.4), raw photo, dslr, f/1.8, bokeh", "Insane details, intricateline work, hypermaximalist, highly textured", "Award-winning photography, National Geographic standard, perfect composition", "Unreal Engine 5 render, Lumen, Nanite, Ray Tracing, 8k resolution", "Visual perfection, cinematic composition, rule of thirds, dynamic angle", "Sub-pixel detail, 100 megapixel, macro details, grain", "Vivid colors, color graded, post-processing, cinematic look", "Detailed eyes, detailed skin texture, detailed fabric", "Atmospheric perspective, depth of field, volumetric lighting"];

        // ==========================================
        // 2. APP STATE
        // ==========================================

        const state = {
            nsfw: false,
            mode: 'manual', // 'manual' or 'random'
            subject: 'female' // 'female', 'male', 'scenery'
        };

        // ==========================================
        // 3. LOGIC CORE
        // ==========================================

        function getActiveLists() {
            const isFemale = state.subject === 'female';
            const isMale = state.subject === 'male';
            const isScenery = state.subject === 'scenery';
            const isNSFW = state.nsfw;

            // 1. Subject List
            let activeSubjectList = ["-None-"];
            if (isFemale) {
                activeSubjectList = activeSubjectList.concat(femaleSubjects);
                if (isNSFW) activeSubjectList = activeSubjectList.concat(nsfwSubjects);
            }
            if (isMale) activeSubjectList = ["-None-"].concat(maleSubjects);
            // Scenery uses -None-

            // 2. Gender List
            let activeGenderList = ["-None-"];
            if (isFemale) activeGenderList = femaleGenderList;
            if (isMale) activeGenderList = maleGenderList;
            if (isScenery) activeGenderList = ["-None-"];

            // 3. Activity
            let activeActivityList = ["-None-"];
            if (isFemale) activeActivityList = femaleActivityList;
            if (isMale) activeActivityList = maleActivityList;
            if (isNSFW && !isMale && !isScenery) activeActivityList = activeActivityList.concat(nsfwActivityList);

            // 4. Expression
            let activeExpressionList = ["-None-"];
            if (isFemale) activeExpressionList = femaleExpressionList;
            if (isMale) activeExpressionList = maleExpressionList;
            if (isNSFW && !isMale && !isScenery) activeExpressionList = activeExpressionList.concat(nsfwExpressionList);

            // 5. Physique
            let activeBodyTypeList = ["-None-"];
            if (isFemale) activeBodyTypeList = femaleBodyTypeList;
            if (isMale) activeBodyTypeList = maleBodyTypeList;
            if (isNSFW && !isMale && !isScenery) activeBodyTypeList = activeBodyTypeList.concat(nsfwBodyTypeList);

            // 6. Hair
            let activeHairStyleList = ["-None-"];
            if (isFemale) activeHairStyleList = femaleHairStyleList;
            if (isMale) activeHairStyleList = maleHairStyleList;

            // 7. Pelvis
            let activePelvisList = ["-None-"];
            if (isFemale) activePelvisList = femalePelvisList;
            if (isMale) activePelvisList = malePelvisList;

            // 8. Clothing
            let activeUpperBodyList = ["-None-"];
            if (isFemale) activeUpperBodyList = femaleUpperBody;
            if (isMale) activeUpperBodyList = maleUpperBody;

            let activeLowerBodyList = ["-None-"];
            if (isFemale) activeLowerBodyList = femaleLowerBody;
            if (isMale) activeLowerBodyList = maleLowerBody;

            let activeFootwearList = ["-None-"];
            if (isFemale) activeFootwearList = femaleFootwearList;
            if (isMale) activeFootwearList = maleFootwearList;

            // 9. Anatomy (Female NSFW)
            let activeBreastList = ["-None-"];
            let activeNippleList = ["-None-"];
            let activeNippleShapeList = ["-None-"];
            let activeVaginaList = ["-None-"];
            let activeVaginaShapeList = ["-None-"];

            if (isNSFW && !isMale && !isScenery) {
                activeBreastList = breastTypeList.concat(nsfwBreastList);
                activeNippleList = nippleTypeList;
                activeNippleShapeList = nippleShapeList;
                activeVaginaList = vaginaTypeList;
                activeVaginaShapeList = vaginaShapeList;
            }

            // 10. Effects
            let activeEffectList = effectList;
            if (isNSFW) activeEffectList = activeEffectList.concat(nsfwEffectList);

            // 11. Jewelry
            let activeHeadJewelry = ["-None-"];
            let activeEarJewelry = ["-None-"];
            let activeNeckJewelry = ["-None-"];
            let activeArmJewelry = ["-None-"];
            let activeHandJewelry = ["-None-"];

            if (!isMale && !isScenery) {
                activeHeadJewelry = headJewelleryList;
                activeEarJewelry = earJewelleryList;
                activeNeckJewelry = neckJewelleryList;
            }

            if (!isScenery) {
                activeArmJewelry = armJewelleryList;
                activeHandJewelry = handJewelleryList;
            }

            return {
                activeSubjectList, activeGenderList, activeActivityList, activeExpressionList,
                activeBodyTypeList, activeHairStyleList, activePelvisList,
                activeUpperBodyList, activeLowerBodyList, activeFootwearList,
                activeBreastList, activeNippleList, activeNippleShapeList,
                activeVaginaList, activeVaginaShapeList,
                activeEffectList, activeHeadJewelry, activeEarJewelry,
                activeNeckJewelry, activeArmJewelry, activeHandJewelry
            };
        }


        // ==========================================
        // 4. UI RENDERING & INTERACTION
        // ==========================================

        const setupScreen = document.getElementById('setup-screen');
        const appScreen = document.getElementById('app-screen');
        const manualContainer = document.getElementById('manual-container');
        const outputText = document.getElementById('output-text');
        const generateBtn = document.getElementById('generate-btn');
        const copyBtn = document.getElementById('copy-btn');
        const randomMessage = document.getElementById('random-message');
        const actionBar = document.getElementById('action-bar');

        // Config Buttons Logic
        document.querySelectorAll('.config-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const btn = e.currentTarget; // Use currentTarget to catch the button click, not span
                const type = btn.dataset.type;
                const value = btn.dataset.value;
                
                // Update State
                if(type === 'nsfw') state.nsfw = (value === 'true');
                if(type === 'mode') state.mode = value;
                if(type === 'subject') state.subject = value;

                // Visual Feedback
                document.querySelectorAll(`.config-btn[data-type="${type}"]`).forEach(b => {
                    b.classList.remove('bg-purple-600', 'text-white', 'border-purple-500');
                    // Revert to default styles
                    b.classList.add('text-gray-300');
                });
                
                btn.classList.remove('text-gray-300');
                btn.classList.add('bg-purple-600', 'text-white', 'border-purple-500');
            });
        });

        document.getElementById('start-btn').addEventListener('click', () => {
            setupScreen.classList.add('hidden');
            setupScreen.classList.remove('opacity-100');
            
            appScreen.classList.remove('hidden');
            // Trigger reflow
            void appScreen.offsetWidth;
            appScreen.classList.add('opacity-100');
            
            initApp();
        });

        document.getElementById('back-btn').addEventListener('click', () => {
            appScreen.classList.add('hidden');
            appScreen.classList.remove('opacity-100');
            
            setupScreen.classList.remove('hidden');
            void setupScreen.offsetWidth;
            setupScreen.classList.add('opacity-100');
            
            actionBar.classList.add('hidden');
        });


        function initApp() {
            manualContainer.innerHTML = ''; // Clear previous UI
            const lists = getActiveLists();
            const isScenery = state.subject === 'scenery';
            
            // Always show action bar
            actionBar.classList.remove('hidden');

            // Logic for Random vs Manual
            if (state.mode === 'manual') {
                randomMessage.classList.add('hidden');
                manualContainer.classList.remove('hidden');
                
                // Helper to create section
                const createSelect = (label, list, id) => {
                    // If list is empty or only None, skip (unless required logic dictates otherwise, but here we filter upstream)
                    if(list.length <= 1 && list[0] === "-None-") return; 

                    const wrapper = document.createElement('div');
                    wrapper.className = "bg-gray-800 p-4 rounded-xl border border-gray-700 shadow-sm";
                    
                    const header = document.createElement('div');
                    header.className = "flex justify-between items-end mb-2";

                    const labelEl = document.createElement('label');
                    labelEl.className = "block text-xs font-bold text-purple-400 uppercase tracking-wider";
                    labelEl.textContent = label;
                    header.appendChild(labelEl);

                    const select = document.createElement('select');
                    select.id = id;
                    select.className = "block w-full p-3 rounded-lg bg-gray-900 text-gray-100 border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm outline-none transition-shadow";
                    
                    list.forEach(item => {
                        const opt = document.createElement('option');
                        opt.value = item;
                        opt.textContent = item;
                        select.appendChild(opt);
                    });
                    
                    const input = document.createElement('input');
                    input.id = id + "_custom";
                    input.type = "text";
                    input.placeholder = "Add detail...";
                    input.className = "mt-2 block w-full p-2 rounded-lg bg-gray-700/50 text-gray-300 text-xs border border-transparent focus:border-purple-500 focus:bg-gray-900 outline-none transition-all";

                    wrapper.appendChild(header);
                    wrapper.appendChild(select);
                    wrapper.appendChild(input);
                    manualContainer.appendChild(wrapper);
                };

                // BUILD UI SECTIONS
                createSelect("LoRA / Trigger", ["-None-"], "lora"); 
                createSelect("Art Style / Type", subjectTypeList, "type");

                if (!isScenery) {
                    createSelect("Main Subject", lists.activeSubjectList, "subject");
                    createSelect("Gender", lists.activeGenderList, "gender");
                    createSelect("Activity", lists.activeActivityList, "activity");
                    createSelect("Hands", handPositionList, "hands");
                    createSelect("Expression", lists.activeExpressionList, "expression");
                    createSelect("Physique", lists.activeBodyTypeList, "body");
                    createSelect("Face", faceTypeList, "face");
                    createSelect("Hair", lists.activeHairStyleList, "hair");
                    createSelect("Eyes", eyeColorList, "eyes");

                    if (state.nsfw && state.subject !== 'male') {
                        createSelect("Breasts", lists.activeBreastList, "breasts");
                        createSelect("Nipples", lists.activeNippleList, "nipples");
                        createSelect("Nipple Shape", lists.activeNippleShapeList, "nippleShape");
                    }

                    createSelect(state.subject === 'male' ? "Lower Body" : "Hips / Pelvis", lists.activePelvisList, "pelvis");

                    if (state.nsfw && state.subject !== 'male') {
                        createSelect("Anatomy (V)", lists.activeVaginaList, "vagina");
                        createSelect("Shape (V)", lists.activeVaginaShapeList, "vaginaShape");
                    }

                    createSelect("Clothing (Top)", lists.activeUpperBodyList, "upper");
                    createSelect("Clothing (Bottom)", lists.activeLowerBodyList, "lower");
                    createSelect("Footwear", lists.activeFootwearList, "feet");

                    if (state.subject !== 'male') {
                        createSelect("Jewelry (Head)", lists.activeHeadJewelry, "jewel_head");
                        createSelect("Jewelry (Ear)", lists.activeEarJewelry, "jewel_ear");
                        createSelect("Jewelry (Neck)", lists.activeNeckJewelry, "jewel_neck");
                    }
                    createSelect("Jewelry (Arm)", lists.activeArmJewelry, "jewel_arm");
                    createSelect("Jewelry (Hand)", lists.activeHandJewelry, "jewel_hand");
                }

                createSelect("Background", backgrounds, "bg");
                if(!isScenery) createSelect("Position", subjectPositionList, "pos");
                createSelect("Visual Style", styleList, "style");
                createSelect("Effects", lists.activeEffectList, "fx");
                createSelect("Camera Shot", shotList, "shot");
                createSelect("Camera Lens", cameraLensList, "lens");
                createSelect("Lighting", lightingList, "light");
                createSelect("Quality", qualityList, "quality");

            } else {
                // Random Mode UI
                manualContainer.classList.add('hidden');
                randomMessage.classList.remove('hidden');
            }
        }

        // ==========================================
        // 5. GENERATION LOGIC
        // ==========================================

        function generatePrompt() {
            const lists = getActiveLists();
            const isScenery = state.subject === 'scenery';
            let promptParts = [];

            // Helper to extract value
            const getValue = (list, id, isRandomMode = false) => {
                // MANUAL
                if (state.mode === 'manual') {
                    const el = document.getElementById(id);
                    if (!el) return "";
                    const val = el.value;
                    const custom = document.getElementById(id+"_custom").value.trim();
                    let res = "";
                    if (val !== "-None-") res += val;
                    if (custom) res += (res ? " " : "") + custom;
                    return res;
                } 
                // RANDOM
                if (list.length <= 1) return "";
                // 100% Chance for active lists in Random Mode
                const idx = Math.floor(Math.random() * (list.length - 1)) + 1;
                return list[idx];
            };

            // 1. Lora
            const lora = state.mode === 'manual' ? document.getElementById('lora_custom').value : "";
            if(lora) promptParts.push(lora);

            // 2. Type
            const type = getValue(subjectTypeList, "type", true);

            if (isScenery) {
                // SCENERY LOGIC (Compressed)
                let worldPart = [];
                let techPart = [];

                if(type) worldPart.push(type);
                
                const bg = getValue(backgrounds, "bg", true); if(bg) worldPart.push(bg);
                
                const sty = getValue(styleList, "style", true); if(sty) techPart.push(sty);
                const ef = getValue(lists.activeEffectList, "fx", true); if(ef) techPart.push(ef);
                const sh = getValue(shotList, "shot", true); if(sh) techPart.push(sh);
                const le = getValue(cameraLensList, "lens", true); if(le) techPart.push(le);
                const li = getValue(lightingList, "light", true); if(li) worldPart.push(li);
                const qu = getValue(qualityList, "quality", true); if(qu) techPart.push(qu);

                let final = worldPart.join(", ");
                if(techPart.length > 0) final += ". " + techPart.join(", ");
                return final;
            } 
            
            // CHARACTER LOGIC
            // Manual Mode: Get form value. Random Mode: Pick random from active list
            const subj = getValue(lists.activeSubjectList, "subject", true);
            
            // Gender Logic for Random Mode
            let gen = "";
            if (state.mode === 'manual') {
                gen = getValue(lists.activeGenderList, "gender");
            } else {
                // Random Gender logic 
                if (state.subject === 'female') gen = getRndText(femaleGenderList.slice(1));
                else if (state.subject === 'male') gen = getRndText(maleGenderList.slice(1));
            }
            
            let mainSentence = [];
            if(type) mainSentence.push(type);
            if(subj && gen) mainSentence.push(subj + ", " + gen);
            else { if(subj) mainSentence.push(subj); if(gen) mainSentence.push(gen); }

            let sentenceStr = mainSentence.join(" ");
            
            const act = getValue(lists.activeActivityList, "activity", true);
            if(act) sentenceStr += (sentenceStr.length > 0 ? " who is " : "") + act;

            const hand = getValue(handPositionList, "hands", true);
            if(hand) {
                var lowerHand = hand.trim().toLowerCase();
                var isVerb = lowerHand.endsWith("ing") || lowerHand.startsWith("holding") || lowerHand.startsWith("reaching") || lowerHand.startsWith("gripping");
                if (isVerb) { sentenceStr += ", " + hand; } else { sentenceStr += ", with " + hand; }
            }

            const expr = getValue(lists.activeExpressionList, "expression", true);
            if(expr) sentenceStr += ", " + expr;

            if(sentenceStr) promptParts.push(sentenceStr);

            // Appearance Array
            let appParts = [];
            appParts.push(getValue(lists.activeBodyTypeList, "body", true));
            appParts.push(getValue(faceTypeList, "face", true));
            appParts.push(getValue(lists.activeHairStyleList, "hair", true));
            appParts.push(getValue(eyeColorList, "eyes", true));
            
            if (state.nsfw && state.subject !== 'male') {
                appParts.push(getValue(lists.activeBreastList, "breasts", true));
                appParts.push(getValue(lists.activeNippleList, "nipples", true));
                appParts.push(getValue(lists.activeNippleShapeList, "nippleShape", true));
            }
            
            appParts.push(getValue(lists.activePelvisList, "pelvis", true));

            if (state.nsfw && state.subject !== 'male') {
                appParts.push(getValue(lists.activeVaginaList, "vagina", true));
                appParts.push(getValue(lists.activeVaginaShapeList, "vaginaShape", true));
            }

            appParts.push(getValue(lists.activeUpperBodyList, "upper", true));
            appParts.push(getValue(lists.activeLowerBodyList, "lower", true));
            appParts.push(getValue(lists.activeFootwearList, "feet", true));

            if (state.subject !== 'male') {
                appParts.push(getValue(lists.activeHeadJewelry, "jewel_head", true));
                appParts.push(getValue(lists.activeEarJewelry, "jewel_ear", true));
                appParts.push(getValue(lists.activeNeckJewelry, "jewel_neck", true));
            }
            appParts.push(getValue(lists.activeArmJewelry, "jewel_arm", true));
            appParts.push(getValue(lists.activeHandJewelry, "jewel_hand", true));
            
            // World & Tech
            let worldPart = [];
            let techPart = [];

            const bg = getValue(backgrounds, "bg", true); if(bg) worldPart.push(bg);
            const pos = getValue(subjectPositionList, "pos", true); if(pos) worldPart.push(pos);
            const sty = getValue(styleList, "style", true); if(sty) techPart.push(sty);
            const fx = getValue(lists.activeEffectList, "fx", true); if(fx) techPart.push(fx);
            const sh = getValue(shotList, "shot", true); if(sh) techPart.push(sh);
            const le = getValue(cameraLensList, "lens", true); if(le) techPart.push(le);
            const li = getValue(lightingList, "light", true); if(li) worldPart.push(li);
            const qu = getValue(qualityList, "quality", true); if(qu) techPart.push(qu);

            let finalString = "";
            if (promptParts.length > 0) finalString += promptParts.join(", ");
            
            const validApp = appParts.filter(Boolean);
            if (validApp.length > 0) { if (finalString.length > 0) finalString += ". "; finalString += validApp.join(", "); }
            
            if (worldPart.length > 0) { if (finalString.length > 0) finalString += ". "; finalString += worldPart.join(", "); }
            if (techPart.length > 0) { if (finalString.length > 0) finalString += ". "; finalString += techPart.join(", "); }

            return finalString;
        }

        function getRndText(list) {
            return list[Math.floor(Math.random() * list.length)];
        }

        // Event Trigger
        generateBtn.addEventListener('click', () => {
            // Animation feedback
            generateBtn.classList.add('scale-95');
            setTimeout(() => generateBtn.classList.remove('scale-95'), 100);
            
            const prompt = generatePrompt();
            outputText.value = prompt;
        });

        copyBtn.addEventListener('click', () => {
            outputText.select();
            document.execCommand('copy');
            const original = copyBtn.textContent;
            copyBtn.textContent = "COPIED!";
            copyBtn.classList.add('bg-green-600', 'text-white', 'border-green-500');
            setTimeout(() => {
                copyBtn.textContent = original;
                copyBtn.classList.remove('bg-green-600', 'text-white', 'border-green-500');
            }, 1500);
        });

    </script>
</body>
</html>

