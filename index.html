<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#111827">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>PromptGen</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- PWA Manifest (Data URI) -->
    <link rel="manifest" href="data:application/manifest+json;base64,eyJuYW1lIjoiUHJvbXB0R2VuIiwic2hvcnRfbmFtZSI6IlByb21wdEdlbiIsInN0YXJ0X3VybCI6Ii4iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29xvciIjEjMTE4MjciLCJ0aGVtZV9jb2xvciI6IiMxMTE4MjciLCJpY29ucyI6W3sic3JjIjoiaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzE5MiIsInNpemVzIjoiMTkyeDE5MiIsInR5cGUiOiJpbWFnZS9wbmcifV19" />

    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .scrollbar-hide {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        select {
            background-image: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 select-none">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONS ---
        const IconWrapper = ({ children, className, size = 24, onClick }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
                onClick={onClick}
                style={{ cursor: onClick ? 'pointer' : 'default' }}
            >
                {children}
            </svg>
        );

        const Copy = (props) => <IconWrapper {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconWrapper>;
        const RefreshCw = (props) => <IconWrapper {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></IconWrapper>;
        const Sparkles = (props) => <IconWrapper {...props}><path d="m12 3-1.9 5.8a2 2 0 0 1-1.2 1.3l-5.9 1.9 5.9 1.9a2 2 0 0 1 1.2 1.3l1.9 5.9 1.9-5.9a2 2 0 0 1 1.2-1.3l5.9-1.9-5.9-1.9a2 2 0 0 1-1.2-1.3Z"/></IconWrapper>;
        const MessageSquare = (props) => <IconWrapper {...props}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></IconWrapper>;
        const ImageIcon = (props) => <IconWrapper {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></IconWrapper>;
        const Trash2 = (props) => <IconWrapper {...props}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></IconWrapper>;
        const Check = (props) => <IconWrapper {...props}><polyline points="20 6 9 17 4 12"/></IconWrapper>;
        const Flame = (props) => <IconWrapper {...props}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.1.2-2.2.5-3.3a7 7 0 0 1 2.5 2.8z"/></IconWrapper>;
        const Type = (props) => <IconWrapper {...props}><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" x2="15" y1="20" y2="20"/><line x1="12" x2="12" y1="4" y2="20"/></IconWrapper>;


        // --- STATIC DATA ---

        const textRoles = ['Expert Consultant', 'Creative Writer', 'Senior Developer', 'Data Analyst', 'Academic Tutor', 'Life Coach', 'Marketing Guru', 'Legal Advisor', 'Travel Guide', 'Chef'];
        const textTones = ['Professional', 'Friendly', 'Witty', 'Sarcastic', 'Academic', 'Simple English', 'Persuasive', 'Empathetic', 'Authoritative', 'Casual'];
        const textFormats = ['Bullet Points', 'Essay', 'Code Snippet', 'Step-by-Step Guide', 'Table', 'Email', 'JSON', 'Markdown', 'Summary'];

        const subjectOptions = ["Something Else", "Female", "Woman", "Girl", "Old Woman", "Boy", "Male", "Man", "Old Man"];

        const bodyBuildOptions = [
          "-none-", "Slim build", "Petite frame", "Slender physique", "Skinny physique", "Waif-like build", "Athletic build", "Muscular physique", "Toned body", "Fit physique", "Ripped physique", "Tall and statuesque", "Model-like proportions", "Curvy build", "Voluptuous build", "Full-figured", "Plus-size", "Soft body", "Chubby build", "Average build"
        ];

        const bustOptionsSFW = [
          "-none-", "Flat chested", "Small bust", "Petite bust", "Modest bust", "Delicate bust", "Subtle curves", "A-cup", "B-cup", "C-cup", "D-cup", "Compact bust", "Tight chest", "Athletic bust", "Firm bust", "Toned chest", "Natural bust", "Average bust", "Medium bust", "Proportional bust", "Perky bust", "Lifted bust", "High-set bust", "Rounded bust", "Soft bust", "Full bust", "Plump bust", "Generous bust", "Ample bosom", "Large bust", "Heavy chested", "Voluptuous bust", "Busty", "Curvy chest", "Prominent bust", "Deep cleavage", "Low-cut neckline", "Heaving chest", "Bountiful bust", "Massive bust", "Statuesque bust", "Mature bust", "Symmetrical bust"
        ];
        const bustOptionsNSFW = [
          "-none-", "Nipples poking through shirt", "Sheer top revealing bust", "Exposed cleavage", "Deep plunging neckline", "Sideboob visible", "Underboob visible", "Oil-slicked bust", "Sweat-glistening chest", "Heaving bosom", "Bouncing bust", "Squeezed cleavage", "Pressed against glass", "Massive natural tits", "Fake silicone tits", "Gigantic milkers", "Heavy hanging breasts", "Perky nipples", "Hard nipples", "Soft jiggly breasts", "Pale milky breasts", "Tan line on breasts", "Bust spilling out of top", "Straining buttons", "Wet t-shirt clinging", "Lingerie pushing up bust", "Corset lifting breasts", "Pasties on nipples", "Tassels on breasts", "Breast expansion fantasy", "Hyper-sized breasts", "Anime proportions bust", "Gravity-defying tits", "Sensitive nipples", "Pierced nipples", "Tattooed chest", "Silky smooth breasts", "Veiny breasts", "Lactating breasts", "Mature sagging breasts", "Perfect round globes"
        ];

        const figureOptionsSFW = [
          "-none-", "Hourglass figure", "Pear-shaped figure", "Apple-shaped figure", "Inverted triangle figure", "Rectangle figure", "Spoon figure", "Diamond figure", "Oval figure", "Slender figure", "Slim waist", "Skinny hips", "Thin frame", "Lean figure", "Wiry frame", "Lanky figure", "Petite figure", "Short stature", "Compact figure", "Small-framed", "Medium-framed", "Large-framed", "Curvy figure", "Soft curves", "Fleshy figure", "Full-figured", "Plus-size figure", "Chubby figure", "Overweight figure", "Heavy-set figure", "Voluptuous figure", "Thick figure", "Stocky build", "Broad-shouldered", "Wide hips", "Narrow waist", "Wasp waist", "Corseted waist", "Long legs", "Leggy figure", "Statuesque figure", "Amazonian figure", "Tall figure", "Athletic figure", "Muscular figure", "Toned figure", "Ripped figure", "Fit figure", "Strong figure", "Powerful physique"
        ];
        const figureOptionsNSFW = [
          "-none-", "Thicc figure", "Slim-thick figure", "Bubble butt", "Massive ass", "Breeding hips", "Wide birthing hips", "Gaping thigh gap", "Thick thighs saving lives", "Thunder thighs", "Juicy curves", "Luscious figure", "Seductive curves", "Bedroom body", "Made for sin", "Exaggerated hourglass", "Impossible waistline", "Kim K proportions", "Jessica Rabbit figure", "Bimbo proportions", "Hyper-feminine figure", "Fertile figure", "Soft squeezable body", "Oil-covered body", "Latex-wrapped figure", "Bound figure", "Submissive posture", "Dominatrix physique", "Yoga flexible body", "Contortionist figure", "Tight toned body", "Hardbody", "Amazonian goddess", "Mature MILF figure", "Cougar body", "BBW figure", "SSBBW figure", "Stacked figure", "Double cheeked up", "Wearing nothing but heels", "Posing purely for pleasure", "Ready for action", "Supple skin", "Velvet skin texture"
        ];

        // --- CLOTHING LISTS ---
        const clothingUpperSFW = [
          "-none-", "Basic white t-shirt", "Black fitted t-shirt", "Oversized graphic tee", "Vintage rock band tee", "Flannel shirt", "Plaid lumberjack shirt", "Denim shirt", "Chunky knit sweater", "Cable knit pullover", "Cashmere sweater", "Turtleneck sweater", "Mock neck sweater", "Cardigan", "Oversized hoodie", "Zip-up hoodie", "Tank top", "Denim jacket", "Leather biker jacket", "Bomber jacket", "Varsity jacket", "Puffer jacket", "Trench coat", "Pea coat", "Wool overcoat", "Faux fur coat", "Raincoat", "Windbreaker", "Parka", "Blazer", "Track jacket", "Kimono", "Yukata", "Poncho", "Shawl", "Cape", "Cloak", "Robe", "Bathrobe", "Scrub top", "Lab coat", "Mechanic shirt", "Military fatigue jacket", "Plate armor breastplate", "Chainmail shirt", "Leather cuirass", "Thermal top", "Space suit", "Hazmat suit", "Tactical vest",
          "Silk blouse", "Satin blouse", "Chiffon top", "Lace trimmed blouse", "Peasant blouse", "Floral print tunic", "Bohemian tunic", "Embroidered tunic", "Crop top", "Tube top", "Halter top", "Racerback tank", "Sports bra", "Cheongsam top", "Corset (over shirt)", "Bodice", "Off-shoulder top", "One-shoulder top", "Cold-shoulder top", "Bell-sleeve blouse", "Puff-sleeve top", "Bikini top", "Summer dress bodice", "Evening gown bodice", "Maid outfit top", "Nurse uniform top",
          "Striped polo shirt", "Crisp white button-down shirt", "Blue oxford shirt", "Suit vest", "Tuxedo jacket", "Smoking jacket", "Muscle shirt", "Undershirt", "Doublet", "Jerkin", "Waistcoat", "henley shirt", "Rugby shirt", "Basketball jersey", "Football jersey"
        ];

        const clothingUpperNSFW = [
          "-none-", "Sheer mesh top", "Fishnet shirt", "Wet-look tank top", "Latex top", "Vinyl crop top", "Body paint top", "Oiled skin (no top)", "Wet white t-shirt", "Torn shirt", "Shredded tank top", "Metal harness", "Rope bondage harness", "Collar and leash", "Latex catsuit top", "Transparent raincoat (naked underneath)", "Fur stole (naked underneath)", "Unzipped hoodie (no shirt)", "Leather vest (open)", "Spiked harness", "Gag (ball)", "Gag (ring)", "Blindfold", "Latex hood",
          "See-through lace bra", "Black lace bralette", "Red satin push-up bra", "White silk balconette bra", "Strappy harness bra", "Leather cupless bra", "Open-cup corset", "Underboob crop top", "Micro bikini top", "String bikini top", "Pasties", "Nipple tassels", "Electrical tape X's", "Unbuttoned white shirt (no bra)", "Cleavage-baring halter", "Deep plunging neckline top", "Sideboob bodysuit", "Backless top", "Chainmail bikini top", "PVC bustier", "Tight sweater", "Virgin killer sweater", "Keyhole sweater", "Boob tube", "Lace teddy", "Sheer babydoll", "Silk chemise", "Satin camisole", "Corset (tight laced)", "Golden nipple covers", "Pearl strand top", "Whipped cream bikini", "Maid outfit top (revealing)", "Schoolgirl shirt (tied)", "Nun habit (torn)", "Bunny suit top",
          "Leather chest harness", "Rubber chest harness", "Mesh tank top", "Open leather vest (bare chest)", "Unbuttoned shirt (bare chest)", "Torn muscle shirt", "Latex muscle tank", "Chainmail vest (no shirt)", "Bulge-enhancing harness", "Gladiator pauldron (no shirt)", "Fireman coat (open)", "Cowboy vest (no shirt)", "Police shirt (open)", "Construction vest (no shirt)", "Suspenders (no shirt)", "Bowtie and cuffs (no shirt)"
        ];

        const clothingLowerSFW = [
          "-none-", "Blue skinny jeans", "Black ripped jeans", "White denim jeans", "Khaki chinos", "Black slacks", "Corduroy pants", "Leather pants", "Vinyl pants", "Velvet pants", "Linen trousers", "Cargo pants", "Camo cargo pants", "Baggy sweatpants", "Grey joggers", "Track pants", "Black leggings", "Yoga pants", "Denim shorts", "Athletic shorts", "Biker shorts", "Greaves (armor)", "Plate armor leggings", "Chainmail chausses", "Scrub pants", "Mechanic pants", "Military fatigue pants", "Tactical pants", "Pajama pants", "Overalls", "Jumpsuit bottom", "Socks (Crew/Wool)", "Boots",
          "Mom jeans", "Boyfriend jeans", "Patterned leggings", "Jeggings", "Harem pants", "Palazzo pants", "Culottes", "Gaucho pants", "Capri pants", "High-waisted shorts", "Daisy dukes", "Mini skirt", "Pleated skirt", "Pencil skirt", "A-line skirt", "Maxi skirt", "Midi skirt", "Skater skirt", "Tennis skirt", "Wrap skirt", "Tulle skirt", "Leather skirt", "Satin skirt", "Chiffon skirt", "Sarong", "Hoop skirt", "Petticoat", "Bustle skirt", "Tutu", "Fishnet tights", "Opaque tights", "Sheer stockings", "Thigh-high socks", "Leg warmers", "Garters (functional)", "Bikini bottom",
          "Grey dress trousers", "Plaid trousers", "Cargo shorts", "Chino shorts", "Bermuda shorts", "Board shorts", "Swim trunks", "Kilt", "Breeches", "Boxer shorts", "Rugby shorts", "Basketball shorts", "Cycling shorts"
        ];

        const clothingLowerNSFW = [
          "-none-", "Latex leggings", "Wet-look leggings", "Leather pants (tight)", "Assless chaps", "Leather chaps", "Open-back pants", "Rip-away pants", "Harness bottom", "Body paint bottom", "Oiled skin (no bottom)", "Strategically placed towel", "Just heels", "Shibari rope legs", "Fetish boots", "Latex socks", "Spanked red skin", "Pierced navel context",
          "White cotton panties", "Black lace panties", "Red silk panties", "Pink satin panties", "Leopard print panties", "Thong", "G-string", "C-string", "Tanga panties", "Cheeky panties", "Boyshorts", "French cut panties", "Micro bikini bottom", "String bikini bottom", "Crotchless panties", "Open-back panties", "Sheer mesh panties", "See-through lace panties", "Zipper crotch panties", "Chainmail panties", "Metal chastity belt", "Pearl g-string", "Edible panties", "Ruffle panties", "Garter belt and stockings", "Suspender belt", "Thigh-high stockings", "Fishnet stockings", "Sheer pantyhose", "Crotchless pantyhose", "Torn stockings", "Laddered tights", "Micro skirt", "Belt skirt", "Pleated mini skirt (very short)", "Schoolgirl skirt", "Cheerleader skirt", "Latex mini skirt", "Maid apron (no bottom)", "Nurse skirt (short)", "Bunny tail", "Succubus tail", "Mermaid tail",
          "Tight white briefs", "Black boxer briefs", "Silk boxers", "Leather jockstrap", "Rubber jockstrap", "Bulge pouch underwear", "Thong (men's)", "G-string (men's)", "C-ring", "Chastity cage", "Open-fly jeans", "Towel (barely holding)", "Fundoshi", "Leather codpiece", "Latex shorts", "Rubber biker shorts", "Unzipped trousers"
        ];

        const imageEffects = [
          "-none-", "floating multicolor glass shards in the air", "lightning and thunder tearing the sky", "swirling vortex of autumn leaves", "iridescent bubbles floating in the air", "glowing magical runes hovering in space", "heavy rain with splashing water droplets", "soft falling cherry blossom petals", "thick rolling fog covering the ground", "majestic aurora borealis in the sky", "golden dust particles dancing in light", "burning embers rising from a fire", "holographic data streams and glitches", "celestial nebula clouds forming shapes", "crystal clear water splashes frozen in time", "dramatic volumetric god rays piercing through", "swirling smoke forming mystical shapes", "bioluminescent spores floating gently", "shattered mirror fragments reflecting light", "electric sparks flying in all directions", "petals turning into birds", "liquid gold dripping from above", "anti-gravity rocks floating upwards", "neon laser beams cutting through smoke", "soft white feathers falling slowly", "cinematic lens flare blinding the view", "chromatic aberration glitch effect", "double exposure with a galaxy", "heat haze distortion shimmering", "frost patterns creeping on the lens", "underwater air bubbles rising fast", "fireflies illuminating the darkness", "rainbow halos surrounding lights", "mystical blue aura radiating outward", "ominous dark shadows creeping in", "exploding colorful powder (holi powder)", "paper confetti raining down", "swirling sandstorm obscuring the view", "meteor shower streaking across the sky", "floating geometric shapes made of light", "transparent ghost-like apparitions", "liquid chrome textures melting", "digital pixelation dissolving the edges", "vibrant rainbow arching overhead", "steam rising from hot surfaces", "frozen time with suspended objects", "falling snow flakes in macro detail", "glowing fiber optic cables tangling", "molten lava cracks forming on ground", "crystalline ice shards growing", "ethereal spirit energy wisps", "vintage film grain and scratches", "watercolor paint splatter overlay", "ink dissolving in water effect", "kaleidoscope pattern refraction", "floating ancient parchment pages", "clock gears and springs exploding", "petals of fire blooming", "metallic liquid mercury pooling", "soft soap bubbles reflecting the world", "star trails circling the center", "dramatic thunderclouds rolling in", "shockwaves distorting the air", "floating candles with blue flames", "mystical portal opening in the background", "vines growing rapidly in time-lapse", "glass shattering into diamonds", "glowing circuit board patterns on skin", "smoke rings drifting lazily", "raindrops on the camera lens", "motion blur speed lines", "glowing red eyes in the shadows", "floating musical notes in gold", "butterfly swarm taking flight", "dandelion seeds blowing in wind", "thick spiderwebs glistening with dew", "broken chain links flying apart", "floating playing cards in mid-air", "coins cascading down like rain", "blood moon casting red light", "solar eclipse creating a diamond ring", "cracks in reality showing void", "floating lanterns lighting the sky", "tornado funnels touching down", "tsunami wave freezing in motion", "floating islands of rock and moss", "giant planet rising on the horizon", "two suns setting in the distance", "purple lightning striking the ground", "magical barrier shimmering", "time warping into a spiral", "angels feathers turning to ash", "demonic horns growing from shadows", "halo of golden light", "thousands of origami cranes flying", "floating water spheres", "pixelated glitch art intrusion", "vhs tracking error lines", "thermal camera heat signature overlay", "xray vision reveal", "cosmic stardust sprinkling down"
        ];

        const imageLighting = ["Cinematic lighting", "Natural sunlight", "Golden hour", "Blue hour", "Neon lights", "Studio lighting", "Softbox lighting", "Rim lighting", "Backlighting", "Volumetric lighting", "God rays", "Bioluminescent glow", "Firelight", "Candlelight", "Moonlight", "Starlight", "Fluorescent light", "Incandescent light", "Ultraviolet light", "Infrared light", "Laser lights", "Strobe lights", "Rembrandt lighting", "Chiaroscuro", "Butterfly lighting", "Split lighting", "Loop lighting", "Broad lighting", "Short lighting", "Silhouette", "Harsh shadows", "Diffused light", "Ambient light", "Flat lighting", "High key lighting", "Low key lighting", "Dramatic lighting", "Moody lighting", "Ethereal glow", "Radiant shimmer", "Sparkling glint", "Lens flare", "Bokeh effect", "Underwater caustics", "Cyberpunk glow", "Vaporwave aesthetics", "Noir shadows", "Warm tones", "Cool tones", "Neutral tones", "Sepia tone", "Monochrome", "Technicolor", "Vintage film grain", "Overexposed", "Underexposed", "Flash photography", "Ring light", "Stage spotlight", "Streetlight glow", "Lantern light", "Fairy lights"];

        const imageShotTypes = ["Wide angle shot", "Ultra-wide angle shot", "Telephoto shot", "Macro shot", "Extreme close-up", "Close-up", "Medium shot", "Cowboy shot", "Medium long shot", "Long shot", "Extreme long shot", "Establishing shot", "Point of view (POV)", "Over the shoulder", "Dutch angle", "Low angle", "High angle", "Bird's eye view", "Worm's eye view", "Eye level", "Knee level", "Ground level", "Aerial view", "Satellite view", "Drone shot", "GoPro footage", "Fisheye lens", "Isometric view", "Orthographic view", "Panorama", "360-degree view", "Tilt shot", "Pan shot", "Tracking shot", "Dolly zoom", "Crane shot", "Steadicam shot", "Handheld camera", "Shaky cam", "Bokeh background", "Shallow depth of field", "Deep depth of field", "Split focus", "Rack focus", "Selfie", "Mirror selfie", "Glamour shot", "Mugshot", "Candid shot", "Paparazzi style", "Security camera footage", "Thermal vision", "Night vision", "X-ray vision", "Telescope view", "Microscope view"];

        const imageExpressions = ["neutral", "happy", "joyful", "ecstatic", "smiling", "laughing", "grinning", "sad", "tearful", "crying", "melancholic", "depressed", "grieving", "angry", "furious", "enraged", "frustrated", "annoyed", "irritated", "fearful", "scared", "terrified", "anxious", "nervous", "panicked", "surprised", "shocked", "amazed", "astonished", "disgusted", "revulsed", "bored", "indifferent", "apathetic", "tired", "sleepy", "exhausted", "drained", "energetic", "excited", "pumped", "confident", "proud", "determined", "bold", "heroic", "stoic", "serious", "contemplative", "thoughtful", "pensive", "mysterious", "enigmatic", "secretive", "romantic", "flirty", "charming", "crazy", "insane", "manic", "delirious", "peaceful", "zen", "calm", "relaxed", "serene", "guilty", "shameful", "embarrassed", "shy", "evil", "sinister", "malicious", "wicked"];

        const imageActions = ["standing confidently with hands resting on hips", "sitting elegantly on an ornate wooden chair", "lounging luxuriously on a velvet throne", "relaxing casually on a modern leather sofa", "walking slowly away from the camera while looking back", "walking purposefully towards the camera with determination", "running at full speed with intense focus", "sprinting aggressively with muscles tensed", "jumping high in mid-air with arms outstretched", "floating weightlessly in zero gravity", "soaring through the sky like a superhero", "falling gracefully through the air", "dancing an elegant waltz with an invisible partner", "dancing wildly with abandon", "fighting intensely with a gleaming sword", "wielding a glowing magical staff with power", "casting a complex magic spell with glowing runes", "holding a futuristic plasma rifle in a combat stance", "aiming a longbow with focused precision", "reading an ancient leather-bound tome", "typing rapidly on a holographic interface", "scrolling through a smartphone with a bored expression", "sipping hot coffee from a ceramic mug", "feasting on a lavish banquet spread", "smoking a cigarette with a contemplative look", "meditating peacefully in the lotus position", "praying devoutly with hands clasped together", "kneeling respectfully on one knee", "bowing deeply in a sign of respect", "saluting sharply with military precision", "waving cheerfully to someone in the distance", "crossing arms defensively across the chest", "shrugging shoulders with a look of confusion", "scratching head in puzzlement", "rubbing tired eyes", "yawning widely with hand over mouth", "stretching arms high above the head", "flexing muscles to show off strength", "pointing dramatically towards the horizon", "cradling a glowing orb of energy", "strumming an acoustic guitar with passion", "playing a violin with intense emotion", "painting on a large canvas with broad strokes", "sculpting clay with focused hands", "climbing a steep rocky mountain face", "swimming gracefully underwater", "riding a majestic horse at a gallop", "driving a fast sports car with wind in hair", "leaning casually against a brick wall", "lying peacefully in tall grass looking at the sky"];

        const imageBackgrounds = ["against a plain solid color background", "standing amidst the towering holographic advertisements of a rain-slicked cyberpunk metropolis", "deep within an ancient Amazonian rainforest where sunlight filters through dense emerald canopies", "standing on the precipice of a crumbling cliff overlooking a churning violet ocean", "inside a bioluminescent mushroom forest glowing with soft teal and magenta hues", "wandering through the ruins of a forgotten marble temple overtaken by giant banyan roots", "in a high-tech orbital station with a panoramic view of the Earth's curvature", "seated in a cozy, clutter-filled wizard's study brimming with ancient scrolls and bubbling potions", "walking down a foggy Victorian street illuminated by the warm glow of flickering gas lamps", "in the center of a bustling interstellar bazaar filled with exotic alien merchants and floating stalls", "relaxing in a serene Japanese onsen surrounded by snow-covered bamboo and steam", "standing in the middle of a vast salt flat mirroring the galaxy above at night", "trapped inside a massive crystal cave where light refracts into a thousand rainbows", "floating in zero gravity inside the wreckage of a derelict spaceship", "in a sun-drenched Mediterranean villa courtyard full of blooming bougainvillea", "exploring a dark, gothic cathedral lit only by thousands of melting candles", "standing on the surface of a red planet with twin moons rising on the horizon", "inside a vibrant underwater coral city teeming with exotic marine life", "in a dusty, sun-baked western saloon with light streaming through wooden slats", "in a sterile, white futuristic laboratory with floating data interfaces", "walking through a field of giant sunflowers under a bright azure sky", "in a gritty, industrial underground fight club with harsh overhead lighting", "in a dreamlike landscape made entirely of candy and pastel-colored clouds", "working in a steampunk workshop filled with brass gears, steam pipes, and ticking clocks", "sitting in a noir detective's office with Venetian blinds casting sharp shadows", "exploring a subterranean glowing cave system filled with crystal clear water", "wandering through a crowded, spice-scented bazaar in ancient Morocco", "standing on the deck of a pirate ship crashing through stormy waves", "in a quiet, tree-lined suburban street bathed in the golden light of autumn", "lounging in the lobby of a lavish Art Deco hotel with gold geometric patterns", "inside a majestic ice palace carved from a single glacier", "standing before a massive stone gate guarded by ancient warrior statues", "playing in a retro neon-lit arcade filled with glowing cabinets", "sitting in a classic 1950s American diner with checkered floors and red leather booths", "in a minimalist, stark white photography studio with infinite curves", "inside a lush, overgrown greenhouse reclaiming a Victorian mansion", "lurking in a dark, steam-filled alleyway in a dystopian mega-city", "meditating in a peaceful bamboo forest with leaves rustling in the wind", "inside a grand library where books float and spiral towards a glass dome ceiling", "driving through a synthwave grid landscape with a retro sun setting in the distance", "standing on a subway platform during rush hour with motion-blurred trains passing", "in front of a charming fairy tale cottage with a thatched roof and smoking chimney", "walking on the surface of the moon with the blue Earth hanging in the black sky", "resting at a desert oasis with palm trees reflecting in the calm water at sunset", "in a sleek, glass-walled corporate office overlooking a sprawling city skyline", "baking in a rustic farmhouse kitchen filled with the scent of fresh bread", "exploring the hallways of a spooky, abandoned hospital with peeling paint", "dancing in the middle of a vibrant street festival with confetti raining down", "standing on a floating island in the sky surrounded by waterfalls falling into clouds", "inside a secret underground bunker illuminated by red emergency lights", "walking through an endless field of vibrant tulips under a windmill"];

        const nsfwExpressions = ["seductive", "lustful", "passionate", "flirty", "aroused", "submissive", "dominant", "pleasurable", "intense", "biting lip", "bedroom eyes", "sultry", "alluring", "tempting", "provocative", "desiring", "yearning", "ecstatic", "breathless", "shivering", "blushing", "naughty", "playful", "coy", "inviting", "smoldering", "wink and tongue out", "gazing intently", "lips slightly parted"];

        const nsfwActions = ["posing seductively in delicate lace lingerie", "lying provocatively on a silk bed sheet", "taking a steamy shower with water cascading down", "undressing slowly with a teasing look", "arching back sensually on a plush rug", "kneeling submissively on a soft bed", "posing confidently in revealing swimwear", "pulling hair back to expose the neck", "touching lips gently with a finger", "looking over the shoulder with a sultry gaze", "crawling slowly towards the camera", "lying relaxed in a bubble-filled bathtub", "posing topless while carefully covering with hands", "wearing a sheer dress that reveals the silhouette", "posing powerfully in a tight latex suit", "bound artistically with red silk ropes", "posing elegantly in a tight-laced corset", "leaning forward to emphasize cleavage", "squatting in a provocative pose", "spreading legs slightly in a daring stance", "lifting skirt playfully to reveal legs", "unbuttoning shirt slowly to reveal skin", "posing while adjusting sheer stockings", "bending over slightly with a flirty smile", "adjusting a bra strap with a knowing look", "biting a ripe strawberry sensually", "sucking on a lollipop with intense eye contact"];

        const nsfwBackgrounds = ["in a dimly lit bedroom draped in heavy red velvet curtains and satin sheets", "inside a luxurious penthouse suite with a floor-to-ceiling view of the city at night", "relaxing in a private jacuzzi filled with rose petals and steam", "standing in a glass-walled shower with steam obscuring the view", "lying on a sprawling bed messy with silk sheets and pillows", "chained in a dark, atmospheric dungeon with flickering torchlight", "dancing in the VIP section of a pulsating, neon-lit nightclub", "in a changing room with mirrors on all sides reflecting every angle", "inside a steamy wooden sauna with soft amber lighting", "in a themed love hotel room with mirrored ceilings and mood lighting", "pressed against a graffiti-covered wall in a dark, rainy alleyway", "lying on a soft white fur rug in front of a roaring fireplace", "standing under a streetlamp in a rain-soaked, deserted street", "in a dimly lit locker room with steam rising from the showers", "in a sleek, modern bathroom with marble floors and gold fixtures", "posing in a dramatic photo studio with high-contrast shadow lighting", "leaning over a green felt pool table in a smoky bar", "wandering through a lush, secret garden of eden at twilight", "lounging in an elegant boudoir filled with antique furniture and lace", "sunbathing on the deck of a luxury yacht as the sun sets over the ocean", "standing on a balcony of a high-rise apartment with the city lights blurring below", "inside a private train cabin with vintage upholstery and drawn curtains", "in a secluded hot spring surrounded by snow and silence"];

        const imageTypes = [
          "Cinematic raw photo of", "Hyper-realistic portrait of", "Analog film shot of", "Polaroid capture of", 
          "Long exposure photography of", "Drone photography of", "Macro photography of", "Underwater photography of",
          "Studio photography of", "Wildlife photography of", "Street photography of", "Tilt-shift photography of",
          "Black and white photography of", "Vintage daguerreotype of", "Double exposure of", "Oil painting of",
          "Watercolor painting of", "Acrylic painting of", "Pastel drawing of", "Charcoal sketch of",
          "Pencil sketch of", "Ink illustration of", "Digital illustration of", "Vector art of",
          "Pixel art of", "Low poly 3D render of", "High fidelity 3D render of", "Isometric 3D render of",
          "Claymation style model of", "Anime style illustration of", "Manga style drawing of", "Comic book panel of",
          "Pop art style poster of", "Ukiyo-e style print of", "Renaissance style painting of", "Impressionist painting of",
          "Surrealist composition of", "Cubist interpretation of", "Abstract representation of", "Graffiti art of",
          "Neon sign design of", "Stained glass window of", "Mosaic art of", "Paper quilling art of",
          "Origami figure of", "Embroidered patch of", "Knitted texture of", "Marble sculpture of",
          "Bronze statue of", "Cyberpunk concept art of"
        ];


        // --- APP COMPONENT ---

        const App = () => {
          const [mode, setMode] = useState('text'); 
          const [generatedPrompt, setGeneratedPrompt] = useState('');
          const [history, setHistory] = useState([]);
          const [copied, setCopied] = useState(false);
          const [isGenerating, setIsGenerating] = useState(false);
          const [fontSize, setFontSize] = useState(80);
          
          const [isNSFW, setIsNSFW] = useState(false);

          const isRedTheme = mode === 'image' && isNSFW;

          const theme = {
            bg: isRedTheme ? "bg-[#0f0505]" : "bg-gray-900",
            headerBg: isRedTheme ? "bg-[#1a0a0a]" : "bg-gray-800",
            cardBg: isRedTheme ? "bg-[#1a0a0a]" : "bg-gray-800",
            historyItemBg: isRedTheme ? "bg-[#220a0a]" : "bg-gray-800",
            borderColor: isRedTheme ? "border-red-900/30" : "border-gray-700",
            text: isRedTheme ? "text-red-50" : "text-gray-100",
            subText: isRedTheme ? "text-red-400/60" : "text-gray-400",
            label: isRedTheme ? "text-red-400" : "text-gray-400",
            inputBg: isRedTheme ? "bg-[#2a0f0f]" : "bg-gray-800",
            accent: isRedTheme ? "text-red-500" : "text-emerald-400",
            focusRing: isRedTheme ? "focus:border-red-500 focus:ring-red-500" : "focus:border-emerald-500 focus:ring-emerald-500",
            gradientTitle: isRedTheme ? "from-red-500 to-orange-600" : "from-emerald-400 to-cyan-400",
            iconColor: isRedTheme ? "text-red-500" : "text-emerald-400",
            slider: isRedTheme ? "accent-red-500" : "accent-emerald-500"
          };

          const [textParams, setTextParams] = useState({
            role: 'Expert Consultant',
            task: 'Explain a complex topic',
            context: '',
            tone: 'Professional',
            format: 'Bullet Points',
            length: 'Medium'
          });

          const [imageParams, setImageParams] = useState({
            typePrefix: 'Cinematic raw photo of', 
            typePrefixStrength: '',
            subjectSelect: 'Woman', 
            subjectSelectStrength: '',
            customSubject: '',      
            customSubjectStrength: '',
            bodyType: '-none-',    
            bodyTypeStrength: '',
            bustType: '-none-',    
            bustTypeStrength: '',
            figureType: '-none-',  
            figureTypeStrength: '',
            expression: 'neutral', 
            expressionStrength: '',
            action: 'standing confidently with hands resting on hips', 
            actionStrength: '',
            clothingUpper: '-none-', 
            clothingUpperStrength: '',
            clothingLower: '-none-', 
            clothingLowerStrength: '',
            background: 'standing amidst the towering holographic advertisements of a rain-slicked cyberpunk metropolis', 
            backgroundStrength: '',
            effect: '-none-',      
            effectStrength: '',
            lighting: 'Cinematic lighting', 
            lightingStrength: '',
            shotType: 'Wide angle shot', 
            shotTypeStrength: '',
          });

          useEffect(() => {
            if (mode === 'image') {
              setImageParams(prev => ({
                ...prev,
                expression: isNSFW ? nsfwExpressions[0] : imageExpressions[0],
                action: isNSFW ? nsfwActions[0] : imageActions[0],
                background: isNSFW ? nsfwBackgrounds[0] : imageBackgrounds[0],
                bustType: '-none-',
                figureType: '-none-',
                clothingUpper: '-none-',
                clothingLower: '-none-'
              }));
            }
          }, [isNSFW]);

          useEffect(() => {
            const savedHistory = localStorage.getItem('promptHistory');
            if (savedHistory) {
              try {
                setHistory(JSON.parse(savedHistory));
              } catch (e) {}
            }
          }, []);

          const saveToHistory = (text) => {
            const newItem = { id: Date.now(), text, type: mode, date: new Date().toLocaleTimeString() };
            const newHistory = [newItem, ...history].slice(0, 20);
            setHistory(newHistory);
            localStorage.setItem('promptHistory', JSON.stringify(newHistory));
          };

          const clearHistory = () => {
            setHistory([]);
            localStorage.removeItem('promptHistory');
          };

          const generateTextPrompt = () => {
            setIsGenerating(true);
            setTimeout(() => {
              const { role, task, context, tone, format, length } = textParams;
              let prompt = `Act as a ${role}.\n\nTASK:\n${task}\n\n`;
              if (context) prompt += `CONTEXT:\n${context}\n\n`;
              prompt += `CONSTRAINTS & STYLE:\n- Tone: ${tone}\n- Format: ${format}\n- Length: ${length} response\n\nPlease ensure the output is high-quality and adheres strictly to the requested format.`;
              
              setGeneratedPrompt(prompt);
              saveToHistory(prompt);
              setIsGenerating(false);
              setCopied(false);
            }, 600);
          };

          const formatWithStrength = (text, strength) => {
             if (!text || text === '-none-' || text === 'Unspecified') return null;
             if (strength && !isNaN(parseFloat(strength))) {
               return `(${text}:${strength})`;
             }
             return text;
          };

          const generateImagePrompt = () => {
            setIsGenerating(true);
            setTimeout(() => {
              const { 
                typePrefix, typePrefixStrength,
                subjectSelect, subjectSelectStrength,
                customSubject, customSubjectStrength,
                bodyType, bodyTypeStrength,
                bustType, bustTypeStrength,
                figureType, figureTypeStrength,
                expression, expressionStrength,
                action, actionStrength,
                clothingUpper, clothingUpperStrength,
                clothingLower, clothingLowerStrength,
                background, backgroundStrength,
                effect, effectStrength,
                lighting, lightingStrength,
                shotType, shotTypeStrength
              } = imageParams;
              
              const typePart = formatWithStrength(typePrefix, typePrefixStrength);

              let subjectText = subjectSelect;
              let subjectStr = subjectSelectStrength;
              if (subjectSelect === 'Something Else') {
                subjectText = customSubject || "an undefined subject";
                subjectStr = customSubjectStrength;
              }
              const subjectPart = formatWithStrength(subjectText, subjectStr);

              let middleParts = [];
              const isFemale = ['Female', 'Woman', 'Old Woman', 'Girl'].includes(subjectSelect);

              if (isFemale) {
                const bodyPart = formatWithStrength(bodyType, bodyTypeStrength);
                if (bodyPart) middleParts.push(`with a ${bodyPart.toLowerCase()}`);
                
                const bustPart = formatWithStrength(bustType, bustTypeStrength);
                if (bustPart) middleParts.push(`featuring a ${bustPart.toLowerCase()}`);
                
                const figurePart = formatWithStrength(figureType, figureTypeStrength);
                if (figurePart) middleParts.push(`and a ${figurePart.toLowerCase()}`);
              }

              const exprPart = formatWithStrength(expression, expressionStrength);
              if (exprPart) middleParts.push(`with a ${exprPart} expression`);

              const actionPart = formatWithStrength(action, actionStrength);
              if (actionPart) middleParts.push(actionPart);

              const upperPart = formatWithStrength(clothingUpper, clothingUpperStrength);
              const lowerPart = formatWithStrength(clothingLower, clothingLowerStrength);

              if (upperPart && lowerPart) {
                middleParts.push(`wearing ${upperPart.toLowerCase()} and ${lowerPart.toLowerCase()}`);
              } else if (upperPart) {
                middleParts.push(`wearing ${upperPart.toLowerCase()}`);
              } else if (lowerPart) {
                middleParts.push(`wearing ${lowerPart.toLowerCase()}`);
              }

              const middleString = middleParts.length > 0 ? `, ${middleParts.join(', ')}` : '';
              
              const bgPart = formatWithStrength(background, backgroundStrength);
              const effectPart = formatWithStrength(effect, effectStrength);
              const lightingPart = formatWithStrength(lighting, lightingStrength);
              const shotPart = formatWithStrength(shotType, shotTypeStrength);

              const effectString = effectPart ? `, enhanced by ${effectPart}` : '';
              
              const prompt = `${typePart} ${subjectPart}${middleString}, ${bgPart}${effectString}. The scene features ${lightingPart} lighting. Captured as a ${shotPart}. High resolution, 8k, incredible detail, masterpiece${isNSFW ? ', NSFW, alluring, provocative' : ''}.`;
              
              setGeneratedPrompt(prompt);
              saveToHistory(prompt);
              setIsGenerating(false);
              setCopied(false);
            }, 600);
          };

          const handleCopy = (text) => {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
              document.execCommand('copy');
              setCopied(true);
              setTimeout(() => setCopied(false), 2000);
            } catch (err) { console.error('Failed to copy', err); }
            document.body.removeChild(textArea);
          };

          const SelectInput = ({ label, value, options, onChange, strengthValue, onStrengthChange }) => (
            <div className="mb-4 w-full">
              <label className={`block text-xs font-bold uppercase mb-1 tracking-wider ${theme.label}`}>{label}</label>
              <div className="flex gap-2 w-full">
                <div className="relative flex-1 min-w-0">
                  <select 
                    value={value} 
                    onChange={(e) => onChange(e.target.value)}
                    className={`w-full text-white p-2 rounded-xl border outline-none appearance-none text-[70%] transition-colors duration-300 ${theme.inputBg} ${theme.borderColor} ${theme.focusRing}`}
                  >
                    {options.map(opt => <option key={opt} value={opt}>{opt}</option>)}
                  </select>
                </div>
                {onStrengthChange && (
                  <input
                    type="number" step="0.1" placeholder="1.0" value={strengthValue} onChange={(e) => onStrengthChange(e.target.value)}
                    className={`w-14 flex-shrink-0 text-center text-white p-2 rounded-xl border outline-none text-[70%] transition-colors duration-300 ${theme.inputBg} ${theme.borderColor} ${theme.focusRing}`}
                  />
                )}
              </div>
            </div>
          );

          const TextInput = ({ label, value, placeholder, onChange, multiline = false, strengthValue, onStrengthChange }) => (
            <div className="mb-4 w-full">
              <label className={`block text-xs font-bold uppercase mb-1 tracking-wider ${theme.label}`}>{label}</label>
              <div className={multiline ? "flex flex-col gap-2 w-full" : "flex gap-2 w-full"}>
                {multiline ? (
                  <textarea
                    value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder}
                    className={`w-full text-white p-2 rounded-xl border outline-none min-h-[80px] text-[70%] transition-colors duration-300 ${theme.inputBg} ${theme.borderColor} ${theme.focusRing}`}
                  />
                ) : (
                  <input
                    type="text" value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder}
                    className={`flex-1 min-w-0 text-white p-2 rounded-xl border outline-none text-[70%] transition-colors duration-300 ${theme.inputBg} ${theme.borderColor} ${theme.focusRing}`}
                  />
                )}
                {onStrengthChange && (
                  <input
                    type="number" step="0.1" placeholder="1.0" value={strengthValue} onChange={(e) => onStrengthChange(e.target.value)}
                    className={`w-14 flex-shrink-0 text-center text-white p-2 rounded-xl border outline-none text-[70%] h-full transition-colors duration-300 ${theme.inputBg} ${theme.borderColor} ${theme.focusRing}`}
                  />
                )}
              </div>
            </div>
          );
          
          // Stable List Selection (No Complex Sorting)
          const activeExpressions = isNSFW ? nsfwExpressions : imageExpressions;
          const activeActions = isNSFW ? nsfwActions : imageActions;
          const activeBackgrounds = isNSFW ? nsfwBackgrounds : imageBackgrounds;
          const activeClothingUpper = isNSFW ? clothingUpperNSFW : clothingUpperSFW;
          const activeClothingLower = isNSFW ? clothingLowerNSFW : clothingLowerSFW;
          const activeBustOptions = isNSFW ? bustOptionsNSFW : bustOptionsSFW;
          const activeFigureOptions = isNSFW ? figureOptionsNSFW : figureOptionsSFW;

          if (imageParams.subjectSelect === 'Something Else') {
            if (activeExpressions[0] !== '-none-') activeExpressions.unshift('-none-');
            if (activeActions[0] !== '-none-') activeActions.unshift('-none-');
          }
          
          const isFemaleSubject = ['Female', 'Woman', 'Old Woman', 'Girl'].includes(imageParams.subjectSelect);

          return (
            <div className={`min-h-screen font-sans flex flex-col max-w-md mx-auto shadow-2xl overflow-x-hidden transition-colors duration-500 ${theme.bg} ${theme.text}`} style={{ fontSize: `${fontSize}%` }}>
              <style>{`select option { font-size: 90%; background-color: ${isRedTheme ? '#2a0f0f' : '#1f2937'}; }`}</style>
              
              <div className={`p-4 pb-2 shadow-md z-10 transition-colors duration-500 ${theme.headerBg} w-full`}>
                <div className="flex justify-between items-center mb-4">
                  <h1 className={`text-xl font-bold bg-gradient-to-r bg-clip-text text-transparent flex items-center gap-2 ${theme.gradientTitle}`}>
                    <Sparkles size={20} className={theme.iconColor} />
                    PromptGen
                  </h1>
                  <button onClick={clearHistory} className={`hover:text-red-400 transition-colors ${theme.subText}`}>
                    <Trash2 size={18} />
                  </button>
                </div>

                <div className="flex items-center gap-3 px-2 py-2 mb-2 rounded-lg bg-black/20 w-full">
                   <Type size={14} className={theme.subText} />
                   <input type="range" min="60" max="110" value={fontSize} onChange={(e) => setFontSize(e.target.value)}
                     className={`w-full h-2 rounded-lg appearance-none cursor-pointer bg-gray-700 ${theme.slider}`} />
                   <Type size={18} className={theme.subText} />
                </div>

                <div className={`flex p-1 rounded-lg mb-2 transition-colors duration-500 ${theme.bg}`}>
                  <button onClick={() => setMode('text')} className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${mode === 'text' ? 'bg-emerald-600 text-white shadow-lg' : theme.subText}`}>
                    <MessageSquare size={16} /> Text AI
                  </button>
                  <button onClick={() => setMode('image')} className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${mode === 'image' ? 'bg-purple-600 text-white shadow-lg' : theme.subText}`}>
                    <ImageIcon size={16} /> Image Gen
                  </button>
                </div>
              </div>

              <div className="flex-1 overflow-y-auto p-4 space-y-6 scrollbar-hide w-full">
                <div className={`rounded-2xl p-4 border shadow-xl transition-all duration-500 ${generatedPrompt ? 'opacity-100 translate-y-0' : 'opacity-50 translate-y-2'} ${theme.cardBg} ${theme.borderColor} w-full max-w-full`}>
                  <div className="flex justify-between items-center mb-2">
                    <span className={`text-xs font-bold uppercase tracking-widest ${theme.label}`}>Generated Result</span>
                    {generatedPrompt && (
                      <span className={`text-xs px-2 py-1 rounded-full animate-pulse ${isRedTheme ? 'text-red-400 bg-red-400/10' : 'text-emerald-400 bg-emerald-400/10'}`}>Ready</span>
                    )}
                  </div>
                  <div className={`rounded-xl p-4 min-h-[120px] text-sm leading-relaxed whitespace-pre-wrap break-words border relative group transition-colors duration-500 ${theme.bg} ${theme.borderColor} ${theme.text}`}>
                    {generatedPrompt || <span className={theme.subText}>Your prompt will appear here...</span>}
                  </div>
                  <div className="flex gap-3 mt-3">
                    <button onClick={() => handleCopy(generatedPrompt)} disabled={!generatedPrompt}
                      className={`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-semibold transition-all active:scale-95 ${copied ? 'bg-emerald-500 text-white' : `${isRedTheme ? 'bg-red-900/50 hover:bg-red-800/50' : 'bg-gray-700 hover:bg-gray-600'} text-white`}`}>
                      {copied ? <Check size={18} /> : <Copy size={18} />}
                      {copied ? 'Copied!' : 'Copy Text'}
                    </button>
                  </div>
                </div>

                <div className="animate-fadeIn w-full">
                  {mode === 'text' ? (
                    <div className="space-y-1 w-full">
                       <TextInput label="I want the AI to act as a..." value={textParams.role} placeholder="e.g. Fitness Coach" onChange={(val) => setTextParams({...textParams, role: val})} />
                      <TextInput label="To perform this task..." value={textParams.task} placeholder="e.g. Create a workout plan" multiline onChange={(val) => setTextParams({...textParams, task: val})} />
                      <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 w-full">
                        <SelectInput label="Tone" value={textParams.tone} options={textTones} onChange={(val) => setTextParams({...textParams, tone: val})} />
                        <SelectInput label="Format" value={textParams.format} options={textFormats} onChange={(val) => setTextParams({...textParams, format: val})} />
                      </div>
                    </div>
                  ) : (
                    <div className="space-y-1 w-full">
                      <div className={`p-3 rounded-xl border mb-4 flex items-center justify-between transition-colors duration-500 ${theme.cardBg} ${theme.borderColor} w-full`}>
                        <div className="flex items-center gap-2">
                          <div className={`p-2 rounded-full transition-colors ${isNSFW ? 'bg-red-500/20 text-red-400' : 'bg-gray-700 text-gray-400'}`}><Flame size={18} /></div>
                          <span className={`text-sm font-bold transition-colors ${isNSFW ? 'text-red-400' : 'text-gray-400'}`}>Mature / Suggestive</span>
                        </div>
                        <button onClick={() => setIsNSFW(!isNSFW)} className={`w-12 h-6 rounded-full relative transition-colors duration-300 ${isNSFW ? 'bg-red-500' : 'bg-gray-600'}`}>
                          <div className={`w-4 h-4 bg-white rounded-full absolute top-1 transition-all duration-300 ${isNSFW ? 'left-7' : 'left-1'}`} />
                        </button>
                      </div>

                      <SelectInput label="Quality / Type of Image" value={imageParams.typePrefix} options={imageTypes} onChange={(val) => setImageParams({...imageParams, typePrefix: val})} strengthValue={imageParams.typePrefixStrength} onStrengthChange={(val) => setImageParams({...imageParams, typePrefixStrength: val})} />

                      <SelectInput label="Subject Type" value={imageParams.subjectSelect} options={subjectOptions} onChange={(val) => setImageParams({...imageParams, subjectSelect: val})} strengthValue={imageParams.subjectSelectStrength} onStrengthChange={(val) => setImageParams({...imageParams, subjectSelectStrength: val})} />

                      {imageParams.subjectSelect === 'Something Else' && (
                        <div className="animate-fadeIn w-full">
                          <TextInput label="Describe Subject" value={imageParams.customSubject} placeholder="e.g. A futuristic cyborg" onChange={(val) => setImageParams({...imageParams, customSubject: val})} strengthValue={imageParams.customSubjectStrength} onStrengthChange={(val) => setImageParams({...imageParams, customSubjectStrength: val})} />
                        </div>
                      )}

                      {isFemaleSubject && (
                        <div className={`space-y-3 animate-fadeIn p-3 rounded-xl border transition-colors duration-500 ${theme.bg} ${theme.borderColor} w-full`}>
                          <h3 className={`text-[10px] font-bold uppercase tracking-widest ${theme.accent}`}>Female Features</h3>
                          <SelectInput label="Body Build (General)" value={imageParams.bodyType} options={bodyBuildOptions} onChange={(val) => setImageParams({...imageParams, bodyType: val})} strengthValue={imageParams.bodyTypeStrength} onStrengthChange={(val) => setImageParams({...imageParams, bodyTypeStrength: val})} />
                          <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 w-full">
                           <SelectInput label="Bust Type" value={imageParams.bustType} options={activeBustOptions} onChange={(val) => setImageParams({...imageParams, bustType: val})} strengthValue={imageParams.bustTypeStrength} onStrengthChange={(val) => setImageParams({...imageParams, bustTypeStrength: val})} />
                           <SelectInput label="Figure Type" value={imageParams.figureType} options={activeFigureOptions} onChange={(val) => setImageParams({...imageParams, figureType: val})} strengthValue={imageParams.figureTypeStrength} onStrengthChange={(val) => setImageParams({...imageParams, figureTypeStrength: val})} />
                          </div>
                        </div>
                      )}
                      
                      <SelectInput label="Subject Expression" value={imageParams.expression} options={activeExpressions} onChange={(val) => setImageParams({...imageParams, expression: val})} strengthValue={imageParams.expressionStrength} onStrengthChange={(val) => setImageParams({...imageParams, expressionStrength: val})} />
                      <SelectInput label="Action / Pose" value={imageParams.action} options={activeActions} onChange={(val) => setImageParams({...imageParams, action: val})} strengthValue={imageParams.actionStrength} onStrengthChange={(val) => setImageParams({...imageParams, actionStrength: val})} />

                      <div className={`space-y-3 animate-fadeIn p-3 rounded-xl border transition-colors duration-500 ${theme.bg} ${theme.borderColor} w-full`}>
                        <h3 className={`text-[10px] font-bold uppercase tracking-widest ${theme.accent}`}>Clothing</h3>
                        <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 w-full">
                          <SelectInput label="Upper Body" value={imageParams.clothingUpper} options={activeClothingUpper} onChange={(val) => setImageParams({...imageParams, clothingUpper: val})} strengthValue={imageParams.clothingUpperStrength} onStrengthChange={(val) => setImageParams({...imageParams, clothingUpperStrength: val})} />
                          <SelectInput label="Lower Body" value={imageParams.clothingLower} options={activeClothingLower} onChange={(val) => setImageParams({...imageParams, clothingLower: val})} strengthValue={imageParams.clothingLowerStrength} onStrengthChange={(val) => setImageParams({...imageParams, clothingLowerStrength: val})} />
                        </div>
                      </div>

                      <SelectInput label="Location / Background" value={imageParams.background} options={activeBackgrounds} onChange={(val) => setImageParams({...imageParams, background: val})} strengthValue={imageParams.backgroundStrength} onStrengthChange={(val) => setImageParams({...imageParams, backgroundStrength: val})} />
                      <SelectInput label="Visual Effects" value={imageParams.effect} options={imageEffects} onChange={(val) => setImageParams({...imageParams, effect: val})} strengthValue={imageParams.effectStrength} onStrengthChange={(val) => setImageParams({...imageParams, effectStrength: val})} />
                      
                      <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 w-full">
                        <SelectInput label="Lighting" value={imageParams.lighting} options={imageLighting} onChange={(val) => setImageParams({...imageParams, lighting: val})} strengthValue={imageParams.lightingStrength} onStrengthChange={(val) => setImageParams({...imageParams, lightingStrength: val})} />
                        <SelectInput label="Shot Type" value={imageParams.shotType} options={imageShotTypes} onChange={(val) => setImageParams({...imageParams, shotType: val})} strengthValue={imageParams.shotTypeStrength} onStrengthChange={(val) => setImageParams({...imageParams, shotTypeStrength: val})} />
                      </div>
                    </div>
                  )}
                </div>

                <button onClick={mode === 'text' ? generateTextPrompt : generateImagePrompt} disabled={isGenerating}
                  className={`w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2 text-white ${mode === 'text' ? 'bg-gradient-to-r from-emerald-500 to-teal-500 shadow-emerald-500/20' : isNSFW ? 'bg-gradient-to-r from-red-700 to-rose-800 shadow-red-900/40 border border-red-500/30' : 'bg-gradient-to-r from-purple-500 to-indigo-500 shadow-purple-500/20'}`}>
                  {isGenerating ? <RefreshCw size={24} className="animate-spin" /> : <Sparkles size={24} />}
                  {isGenerating ? 'Generating...' : 'Generate Prompt'}
                </button>

                {history.length > 0 && (
                  <div className="mt-8 w-full">
                    <h3 className={`font-bold text-xs uppercase tracking-wider mb-3 ${theme.label}`}>Recent History</h3>
                    <div className="space-y-2 w-full">
                      {history.map((item) => (
                        <div key={item.id} className={`p-3 rounded-lg border flex justify-between items-start gap-3 group transition-colors duration-500 ${theme.historyItemBg} ${theme.borderColor} w-full`}>
                          <div className={`flex-1 text-sm truncate cursor-pointer ${theme.subText} min-w-0`} onClick={() => { setGeneratedPrompt(item.text); setMode(item.type); window.scrollTo({ top: 0, behavior: 'smooth' }); }}>
                            <span className={`text-[10px] px-1.5 py-0.5 rounded mr-2 uppercase font-bold ${item.type === 'text' ? 'bg-emerald-900 text-emerald-400' : 'bg-purple-900 text-purple-400'}`}>{item.type}</span> {item.text}
                          </div>
                          <button onClick={() => handleCopy(item.text)} className={`hover:text-white p-1 ${theme.subText} flex-shrink-0`}>
                            <Copy size={14} />
                          </button>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    
    <!-- Service Worker Registration for PWA Installation -->
    <script>
        if ('serviceWorker' in navigator) {
            // Register a no-op service worker to satisfy PWA requirements
            const swCode = "self.addEventListener('install', e => self.skipWaiting()); self.addEventListener('activate', e => self.clients.claim()); self.addEventListener('fetch', e => {});";
            const swBlob = new Blob([swCode], {type: 'application/javascript'});
            navigator.serviceWorker.register(URL.createObjectURL(swBlob))
                .then(() => console.log('SW registered'))
                .catch(err => console.error('SW error', err));
        }
    </script>
</body>
</html>

